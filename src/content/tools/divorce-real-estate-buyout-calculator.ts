import { CalculatorContent } from "@/types";

export const divorceRealEstateBuyoutCalculator: CalculatorContent = {
  title: "Divorce & Real Estate Buyout Calculator",
  description:
    "Calculate fair buyout amounts for real estate division in divorce. Determine equity splits, payment options, and tax implications for both parties.",
  icon: "Icon",
  category: "Lifestyle & Housing",
  slug: "divorce-real-estate-buyout-calculator",
  metaTitle: "Divorce Real Estate Buyout Calculator | Fair Property Division",
  metaDescription: "Calculate buyout amounts for dividing real estate in divorce. Factor in equity, mortgages, refinancing, tax implications, and payment options for fair settlement.",
  article: {
    title: "Dividing Real Estate in Divorce: The Complete Buyout Guide",
    content: `
# Navigating Real Estate Division in Divorce

The family home is often the largest asset in a divorce - and the most emotionally charged. Whether you're buying out your spouse, being bought out, or selling, understanding the financial implications is crucial for making informed decisions during a difficult time.

## Three Options for the Home in Divorce

### Option 1: Sell and Split Proceeds
**How it works:**
- Put house on market
- Pay off mortgage and costs
- Split remaining equity per divorce decree

**Pros:**
- ✅ Clean break for both parties
- ✅ No one needs to qualify for new mortgage
- ✅ Liquidity to start fresh
- ✅ No ongoing tie to ex-spouse

**Cons:**
- ❌ Selling costs (6-10% of value)
- ❌ May have to sell at bad time
- ❌ Children lose family home
- ❌ Moving expenses for both

**Best for:**
- Can't afford to keep home alone
- Neither wants the house
- Need cash to settle other debts
- Contentious divorce

### Option 2: One Spouse Buys Out the Other
**How it works:**
- House appraised
- Equity calculated
- Buying spouse pays other their share
- Buying spouse refinances into sole name

**Pros:**
- ✅ One party keeps family home
- ✅ Stability for children
- ✅ No selling costs
- ✅ Keep favorable interest rate (sometimes)

**Cons:**
- ❌ Must qualify for mortgage alone
- ❌ Cash needed for buyout
- ❌ Tax implications
- ❌ May be house-poor

**Best for:**
- One spouse wants to keep home
- Can afford mortgage and buyout
- Children staying in home
- Emotional attachment to property

### Option 3: Co-Own Post-Divorce (Temporary)
**How it works:**
- Both remain on mortgage and title
- One spouse lives there (usually with kids)
- Set timeline for eventual sale
- Document agreement carefully

**Pros:**
- ✅ Delays need to qualify for solo mortgage
- ✅ Kids stay in home short-term
- ✅ May sell at better time
- ✅ Share appreciation/depreciation

**Cons:**
- ❌ Ongoing tie to ex
- ❌ Both liable for mortgage
- ❌ Complicates future financing
- ❌ One builds equity, other doesn't benefit

**Best for:**
- Temporary until kids graduate
- Housing market is down
- Neither can afford buyout now
- Amicable divorce

## Calculating the Buyout Amount

### Step 1: Determine Fair Market Value

**Method 1: Professional Appraisal**
- Cost: $400-$600
- Most accurate and defendable
- Required by most divorce courts
- Can get 2 appraisals and average

**Method 2: Comparative Market Analysis (CMA)**
- Free from real estate agent
- Based on comparable sales
- Less formal than appraisal
- May not hold up in contested divorce

**Method 3: Automated Valuation (Zillow, etc.)**
- Free and instant
- Often inaccurate (±10%)
- Not acceptable in court
- Use for ballpark only

**Recommendation:** Get professional appraisal to avoid disputes.

### Step 2: Calculate Total Equity

**Formula:**
Total Equity = Fair Market Value - All Liens - Selling Costs (if applicable)

**Example:**
- Fair market value: $500,000
- First mortgage: -$300,000
- HELOC balance: -$20,000
- **Total Equity: $180,000**

**Note:** If selling, deduct:
- Realtor commission (5-6%): -$25,000-$30,000
- Closing costs (1-2%): -$5,000-$10,000
- Repairs/staging: -$5,000-$10,000

### Step 3: Determine Each Spouse's Share

**Community Property States** (AZ, CA, ID, LA, NV, NM, TX, WA, WI):
- Presumption: 50/50 split
- Unless separate property involved

**Equitable Distribution States** (All others):
- "Fair" doesn't always mean equal
- Court considers:
  - Length of marriage
  - Each spouse's income
  - Who paid down payment
  - Separate property contributions
  - Custody of children

**Typical Splits:**
- Equal contribution marriage: 50/50
- One spouse owned pre-marriage: May be 70/30 or other
- Short marriage: More likely to trace contributions

### Step 4: Calculate Buyout Payment

**Example - 50/50 Split:**
- Total equity: $180,000
- Each spouse's share: $90,000
- Buying spouse already owns their half
- **Buyout amount: $90,000** (other spouse's half)

**Example - 70/30 Split:**
- Total equity: $180,000
- Spouse A (buying out): $126,000 (70%)
- Spouse B (leaving): $54,000 (30%)
- **Buyout amount: $54,000**

### Step 5: Determine Payment Method

**Option A: Cash Payment**
- Buying spouse pays lump sum
- From savings, 401(k) loan, family loan
- Clean and immediate

**Option B: Offset Against Other Assets**
- Trade retirement accounts for house equity
- Trade business value for house
- Must consider tax implications

**Example:**
- House equity owed: $90,000
- Offset with $90,000 of buying spouse's 401(k)
- **Warning:** $90k from 401(k) ≠ $90k in house
  - 401(k) has future tax burden
  - May need to gross up amount
  - Consider after-tax values

**Option C: Cash-Out Refinance**
- Refinance for higher amount
- Use cash from refi to pay buyout
- Must have sufficient equity

**Example:**
- Home value: $500,000
- Old mortgage: $300,000
- Refinance for: $390,000 (at 80% LTV = $400,000)
- Pay $90,000 to ex-spouse
- New mortgage: $390,000

**Option D: Seller Financing**
- Ex-spouse acts as lender
- Buying spouse pays over time (3-5 years)
- With or without interest
- Ex-spouse retains lien on property

**Pros:** No immediate cash needed
**Cons:** Ongoing tie; risk if buyer defaults

## Refinancing Considerations

### Can You Qualify Alone?

**Lenders require:**
- Credit score 620+ (higher for best rates)
- Debt-to-income ratio under 43%
- 2 years stable employment
- Sufficient income to afford mortgage

**Income requirements:**
- Monthly mortgage payment ÷ gross monthly income = Under 28%
- Total debt payments ÷ gross monthly income = Under 43%

**Example:**
- New mortgage: $390,000 at 7% = $2,595/month
- Plus insurance/taxes: $600/month
- **Total: $3,195/month**
- **Minimum income needed:** $11,400/month or $137,000/year

**Can't qualify?**
- Wait to refinance (build income/credit)
- Have ex-spouse stay on mortgage temporarily
- Get co-signer
- Consider selling instead

### Removing Ex-Spouse from Mortgage

**Important:** Divorce decree doesn't remove from mortgage!
- Must refinance in your name only
- Or sell the house
- Or get lender to release ex (very rare)

**Until refinanced:**
- Both remain liable for mortgage
- Affects both credit scores
- Limits both spouses' future borrowing
- Ex can sue if you default

**Timeline:** Most divorce decrees require refinancing within 6-12 months.

## Tax Implications

### Capital Gains Tax

**Primary Residence Exclusion:**
- Single: $250,000 gain excluded
- Married filing jointly: $500,000 excluded
- Must have lived there 2 of last 5 years

**Timing Matters:**
- Sell before divorce finalized: May get $500k exclusion
- Sell after divorce: Each gets $250k exclusion

**Buyout Transfers:**
- Transfers between spouses in divorce are tax-free
- But basis carries over (affects future sale)

**Example:**
- Bought for: $300,000
- Now worth: $500,000
- Spouse A buys out Spouse B
- Spouse A's basis: Still $300,000
- When Spouse A sells later for $600,000:
  - Gain: $300,000
  - Excluded: $250,000
  - Taxable: $50,000
  - Tax (15%): $7,500

### Mortgage Interest Deduction

**After buyout:**
- Only remaining owner deducts mortgage interest
- Up to $750,000 of mortgage debt
- Must itemize deductions

### Property Tax Deduction

**Post-divorce:**
- Only owner deducts property tax
- Subject to $10,000 SALT cap

## Special Situations

### Separate Property Component

**Example:**
- Wife owned home before marriage worth $200,000
- Now worth $500,000
- Married 10 years

**Calculation:**
- Separate property: $200,000 (wife's)
- Marital appreciation: $300,000
- Wife's total: $200,000 + $150,000 = $350,000
- Husband's share: $150,000

**Buyout:** Husband receives $150,000

### Improvements with Separate Funds

**Example:**
- Joint home
- Husband used $50,000 inheritance for kitchen remodel
- House appreciated $100,000 total

**May allocate:**
- Husband gets: $50,000 reimbursement + 50% of remaining appreciation
- Wife gets: 50% of remaining appreciation

### Debt Secured by Home

**HELOC or second mortgage:**
- Must be paid off or assumed
- Reduces equity available
- May need to sell to pay off

**Who pays debt?**
- Check who benefited from borrowed funds
- Kitchen remodel = both benefit
- One spouse's business = that spouse pays

### Rental Property

**Different rules:**
- Not primary residence (no $250k exclusion)
- Depreciation recapture tax applies
- May make sense to keep and rent
- Or sell to 1031 exchange into other property

## Common Mistakes to Avoid

### Mistake 1: Keeping House You Can't Afford
- Mortgage + taxes + insurance + maintenance
- Must have 30%+ cushion for unexpected costs
- Don't become house-poor

### Mistake 2: Not Getting Appraisal
- Zillow estimates can be way off
- $500 appraisal can save $20,000 in equity disputes

### Mistake 3: Forgetting Selling Costs
- If comparing buyout vs. sale
- Must account for 7-10% in selling costs
- Net proceeds vs. buyout amount

### Mistake 4: Not Refinancing Promptly
- Leaving ex on mortgage creates ongoing liability
- Affects both parties' credit and future loans
- Most courts order refi within 6-12 months

### Mistake 5: Trading Unequal Assets
- $100k house equity ≠ $100k 401(k)
- 401(k) has tax burden (up to 37%)
- Should trade $100k house for $135k+ retirement account

### Mistake 6: Emotional Decision Making
- Don't keep house just for revenge
- Don't fight over house worth less than legal fees
- Run the numbers objectively

## Sample Buyout Scenarios

### Scenario 1: Wife Keeps House

**Details:**
- Home value: $600,000
- Mortgage: $400,000
- Equity: $200,000
- Split: 50/50
- Wife's income: $120,000/year

**Calculation:**
- Husband's share: $100,000
- Wife refinances: $400,000 mortgage
- Wife cash-out refinances: $500,000 (max at 80% LTV = $480k)
- Pays husband: $100,000
- Wife's new mortgage: $500,000 at 7% = $3,327/month
- Wife's income supports: Yes ($120k/year = $10k/month)

**Result:** Wife buys out husband, refinances in her name.

### Scenario 2: Sell and Split

**Details:**
- Home value: $400,000
- Mortgage: $320,000
- Equity before costs: $80,000
- Neither can afford to keep

**Calculation:**
- Sale price: $400,000
- Realtor (6%): -$24,000
- Closing costs: -$6,000
- Repairs: -$5,000
- Net proceeds: $365,000
- Pay mortgage: -$320,000
- **Split: $45,000 ÷ 2 = $22,500 each**

**Result:** Both walk away with $22,500 to start fresh.

### Scenario 3: Trade for Retirement Account

**Details:**
- Home equity: $300,000
- Husband's 401(k): $400,000
- Wife keeps house, husband keeps 401(k)

**Fair trade?**
- House equity: $300,000 (after-tax value)
- 401(k) after-tax: $400,000 × 0.70 = $280,000 (assuming 30% tax)
- **Not fair!** Husband should keep $400k + wife pays $20k cash
- Or wife keeps house + $20k cash from husband's other assets

## Professional Help Needed

### Divorce Attorney
- Negotiates settlement
- Files court documents
- Protects your rights
- Cost: $3,000-$15,000+

### Real Estate Appraiser
- Provides fair market value
- Defendable in court
- Cost: $400-$600

### Mortgage Broker/Lender
- Pre-qualify for refinance
- Find best rates
- Explain options
- Cost: No upfront cost (paid at closing)

### CPA/Tax Professional
- Tax implications of division
- Asset trade analysis
- Capital gains planning
- Cost: $300-$1,000

### Financial Planner
- Long-term affordability analysis
- Keep vs. sell decision
- Retirement impact
- Cost: $150-$300/hour

## Timing Considerations

### Best time to sell?**
- Before divorce finalized (may get $500k exclusion)
- Spring market (higher prices)
- When both parties ready (avoid fire sale)

**Best time to buy out?**
- When you can comfortably afford it
- When you can refinance (good credit, sufficient income)
- When emotionally ready

**Worst time?**
- Immediately in emotional state
- Before running numbers
- Under pressure from court timeline

## Bottom Line

Real estate is often the biggest financial decision in divorce. Take time to:

1. **Get accurate valuation** - Professional appraisal worth every penny
2. **Run the numbers** - Can you truly afford to keep the house?
3. **Consider taxes** - Asset trades may not be equal after taxes
4. **Think long-term** - Will you want this house in 5 years?
5. **Get professional help** - Attorney, CPA, financial planner
6. **Remove emotion** - Make financial decision, not emotional one

Remember: Keeping the house isn't always the "win." Sometimes the best financial move is to sell, split proceeds, and start fresh with lower expenses and no ongoing tie to your ex.

Use our calculator above to model your specific situation and understand the true cost of buying out your spouse versus selling and moving on.
    `,
  },
  calculator: {
    fields: [
      {
        name: "homeValue",
        label: "Current Home Value",
        type: "number",
        defaultValue: "500000",
      },
      {
        name: "mortgageBalance",
        label: "Mortgage Balance",
        type: "number",
        defaultValue: "300000",
      },
      {
        name: "helocBalance",
        label: "HELOC/Second Mortgage Balance",
        type: "number",
        defaultValue: "0",
      },
      {
        name: "sellingCosts",
        label: "Estimated Selling Costs (if selling)",
        type: "number",
        defaultValue: "40000",
      },
      {
        name: "equitySplitPercent",
        label: "Your Equity Share (%)",
        type: "number",
        defaultValue: "50",
      },
      {
        name: "keepingHome",
        label: "Are You Keeping the Home? (1=Yes, 0=No)",
        type: "number",
        defaultValue: "1",
      },
      {
        name: "annualIncome",
        label: "Your Annual Income",
        type: "number",
        defaultValue: "100000",
      },
      {
        name: "newInterestRate",
        label: "Refinance Interest Rate (%)",
        type: "number",
        defaultValue: "7",
      },
    ],
    results: [
      {
        label: "Total Home Equity",
        isCurrency: true,
      },
      {
        label: "Your Equity Share",
        isCurrency: true,
      },
      {
        label: "Ex-Spouse's Equity Share",
        isCurrency: true,
      },
      {
        label: "Buyout Amount You Owe",
        isCurrency: true,
      },
      {
        label: "New Mortgage (if refinance + buyout)",
        isCurrency: true,
      },
      {
        label: "New Monthly Payment",
        isCurrency: true,
      },
      {
        label: "Can You Afford It?",
        isCurrency: false,
      },
      {
        label: "Net Proceeds if Sell (Each)",
        isCurrency: true,
      },
    ],
    calculate: (values) => {
      const {
        homeValue,
        mortgageBalance,
        helocBalance,
        sellingCosts,
        equitySplitPercent,
        keepingHome,
        annualIncome,
        newInterestRate,
      } = values;

      // Parse inputs
      const value = parseFloat(homeValue);
      const mortgage = parseFloat(mortgageBalance);
      const heloc = parseFloat(helocBalance);
      const sellCosts = parseFloat(sellingCosts);
      const yourPercent = parseFloat(equitySplitPercent) / 100;
      const keeping = parseInt(keepingHome);
      const income = parseFloat(annualIncome);
      const rate = parseFloat(newInterestRate) / 100 / 12;

      // Calculate total equity
      const totalEquity = value - mortgage - heloc;

      // Calculate each spouse's share
      const yourShare = totalEquity * yourPercent;
      const exShare = totalEquity * (1 - yourPercent);

      // Calculate buyout amount (what you owe ex-spouse)
      const buyoutAmount = keeping === 1 ? exShare : 0;

      // Calculate new mortgage if refinancing with buyout
      const newMortgage = keeping === 1 ? mortgage + heloc + buyoutAmount : 0;

      // Calculate new monthly payment
      const term = 30 * 12; // 30 years
      const monthlyPayment = keeping === 1 
        ? newMortgage * (rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1)
        : 0;

      // Add taxes and insurance estimate (1% of home value / year)
      const monthlyTaxInsurance = (value * 0.01) / 12;
      const totalMonthlyPayment = monthlyPayment + monthlyTaxInsurance;

      // Check affordability (DTI should be under 28% for housing)
      const monthlyIncome = income / 12;
      const housingRatio = (totalMonthlyPayment / monthlyIncome) * 100;
      let affordability = "";
      if (keeping === 1) {
        if (housingRatio < 28) {
          affordability = "Yes - Well within budget";
        } else if (housingRatio < 35) {
          affordability = "Borderline - Might be tight";
        } else {
          affordability = "No - May be financially strained";
        }
      } else {
        affordability = "N/A - Not keeping home";
      }

      // Calculate net proceeds if selling
      const netProceeds = value - mortgage - heloc - sellCosts;
      const eachGetsIfSell = netProceeds / 2;

      return [
        {
          label: "Total Home Equity",
          value: totalEquity.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Your Equity Share",
          value: yourShare.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Ex-Spouse's Equity Share",
          value: exShare.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Buyout Amount You Owe",
          value: buyoutAmount.toFixed(2),
          isCurrency: true,
        },
        {
          label: "New Mortgage (if refinance + buyout)",
          value: newMortgage.toFixed(2),
          isCurrency: true,
        },
        {
          label: "New Monthly Payment",
          value: totalMonthlyPayment.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Can You Afford It?",
          value: affordability,
          isCurrency: false,
        },
        {
          label: "Net Proceeds if Sell (Each)",
          value: eachGetsIfSell.toFixed(2),
          isCurrency: true,
        },
      ];
    },
  },
};

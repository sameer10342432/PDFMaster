import { CalculatorContent } from '@/types';

export const RAINWATER_HARVESTING_SYSTEM_ROI_CONTENT: CalculatorContent = {
  title: 'Rainwater Harvesting System ROI Calculator - Water Collection Investment',
  description: 'Calculate the cost and ROI of installing a rainwater harvesting system including tanks, filtration, plumbing, water savings, and available rebates',
  icon: 'Icon',
  slug: 'rainwater-harvesting-system-roi',
  category: 'Water Conservation',
  article: {
    title: 'Rainwater Harvesting Systems: Complete Cost & ROI Guide',
    content: `
    <h2>Why Install a Rainwater Harvesting System?</h2>
    <p>Rainwater harvesting systems collect, store, and distribute rainwater for landscape irrigation, toilet flushing, laundry, and even drinking water (with proper filtration). These systems reduce municipal water bills by 30-50%, provide drought resilience, and reduce stormwater runoff. In high-water-cost areas like California, Texas, and drought-prone regions, rainwater harvesting can pay for itself in 5-12 years. Many utilities offer rebates of $500-$5,000 for system installation, and some municipalities mandate rainwater harvesting for new construction.</p>

    <h3>Types of Rainwater Harvesting Systems</h3>
    <ul>
      <li><strong>Rain Barrel System (50-100 gal):</strong> Cost $100-$400. Simple DIY installation. Collects roof runoff for basic garden watering. Limited storage, only supplements irrigation.</li>
      <li><strong>Basic Tank System (500-1,500 gal):</strong> Cost $1,500-$5,000 installed. Above-ground tanks with pump and basic filtration. Handles landscape irrigation for typical home.</li>
      <li><strong>Large Tank System (2,500-10,000 gal):</strong> Cost $6,000-$20,000 installed. Multiple tanks or underground cistern. Meets significant portion of household water needs.</li>
      <li><strong>Whole-House System (5,000+ gal):</strong> Cost $15,000-$50,000 installed. Advanced filtration, UV treatment, pressure system. Supplies indoor and outdoor non-potable or potable water.</li>
      <li><strong>Commercial/Agricultural:</strong> Cost $20,000-$100,000+. Large cisterns (10,000-50,000+ gallons) for farms, businesses, multi-family properties.</li>
    </ul>

    <h3>System Component Costs</h3>
    <ul>
      <li><strong>Storage Tanks:</strong> $0.50-$2.50 per gallon capacity. Plastic tanks cheaper ($0.50-$1/gal), concrete/fiberglass more durable ($1.50-$2.50/gal). 5,000-gallon system: $2,500-$12,500 for tanks.</li>
      <li><strong>Gutters & Downspouts:</strong> $800-$2,500 for whole-house gutter system if not existing. Include leaf guards ($200-$800) to reduce maintenance.</li>
      <li><strong>First Flush Diverter:</strong> $100-$400. Critical component that diverts contaminated initial runoff away from storage tanks.</li>
      <li><strong>Filtration System:</strong> $500-$3,000 for sediment filters, carbon filters, UV treatment depending on end use. More advanced for indoor use.</li>
      <li><strong>Pump & Pressure System:</strong> $400-$2,000 for pump, pressure tank, controls to deliver water at usable pressure (40-60 PSI).</li>
      <li><strong>Plumbing & Installation:</strong> $1,500-$8,000 for professional installation including tank pad/foundation, pipe runs, electrical, system integration.</li>
    </ul>

    <h3>Water Bill Savings Potential</h3>
    <ul>
      <li><strong>Outdoor Irrigation:</strong> Landscaping uses 30-60% of residential water in summer. Rainwater can eliminate outdoor water bills in rainy climates ($40-$150/month savings, $480-$1,800/year).</li>
      <li><strong>Toilet Flushing:</strong> Toilets use 24% of household water (18-26 gallons/day typical home). Rainwater for toilets saves $15-$40/month ($180-$480/year).</li>
      <li><strong>Laundry Use:</strong> Washing machine uses 15-45 gallons per load. Rainwater for laundry saves $10-$30/month ($120-$360/year).</li>
      <li><strong>Total Annual Savings:</strong> $300-$2,500/year depending on system size, household water use, climate rainfall, and local water rates.</li>
      <li><strong>Drought Surcharges:</strong> During droughts, many utilities charge tiered rates or surcharges. Rainwater systems avoid high-tier pricing (can be $8-$15 per 1,000 gallons vs $3-$5 base rate).</li>
    </ul>

    <h3>Utility Rebates & Incentives</h3>
    <ul>
      <li><strong>Texas Rebates:</strong> Austin Water offers up to $5,000 for residential rainwater systems. San Antonio rebates $0.50-$1.00 per gallon storage capacity.</li>
      <li><strong>California Programs:</strong> Many water districts offer rebates $500-$3,000 for rainwater catchment. Check local water agency programs.</li>
      <li><strong>Arizona Incentives:</strong> Tucson Water rebates $2,000 for qualifying systems. Phoenix offers $250-$1,500 depending on storage capacity.</li>
      <li><strong>Colorado Programs:</strong> Denver and Boulder offer rebates $500-$2,500 for rain barrel and cistern systems.</li>
      <li><strong>Property Tax Exemptions:</strong> Some states (TX, OH) exempt rainwater harvesting equipment from property tax assessments.</li>
      <li><strong>Stormwater Fee Reductions:</strong> Cities with stormwater fees (Philadelphia, DC, Portland) offer 25-50% fee reductions for rainwater capture systems.</li>
    </ul>

    <h3>Water Availability & Collection Potential</h3>
    <ul>
      <li><strong>Collection Formula:</strong> 1 inch of rain on 1,000 sq ft roof = 600 gallons collected (accounting for 10% loss). 2,000 sq ft roof in area with 40" annual rainfall = 48,000 gallons potential.</li>
      <li><strong>Regional Rainfall:</strong> Seattle 38"/year (high), Denver 16"/year (low), Houston 50"/year (high), Phoenix 8"/year (very low). Check local climate data for accurate estimates.</li>
      <li><strong>Seasonal Variation:</strong> Most areas see 50-80% of annual rainfall in 3-4 months. Size storage to capture wet season rain for dry season use.</li>
      <li><strong>Roof Material Impact:</strong> Metal roofs best (95% collection efficiency). Asphalt shingles good (85-90%). Avoid wood shakes/lead flashings for potable systems.</li>
      <li><strong>Usage vs Collection:</strong> Typical home uses 300-400 gallons/day total. Outdoor irrigation 100-200 gal/day summer. Match system size to meet specific needs (partial or full offset).</li>
    </ul>

    <h3>Property Value & Environmental Benefits</h3>
    <ul>
      <li><strong>Home Value Impact:</strong> Rainwater systems add $3,000-$8,000 to appraised value in water-scarce markets. Increasingly attractive to eco-conscious buyers.</li>
      <li><strong>Stormwater Management:</strong> Systems reduce stormwater runoff by 30-80%, decreasing erosion, flooding, and pollution to local waterways.</li>
      <li><strong>Drought Resilience:</strong> During water restrictions or shortages, rainwater systems provide water independence and avoid fines for excess usage.</li>
      <li><strong>Garden Health:</strong> Rainwater is naturally soft, free of chlorine/fluoride, better for plants than municipal water. Improves lawn/garden vitality.</li>
      <li><strong>Energy Savings:</strong> Reduces energy needed to treat/pump municipal water. Each 1,000 gallons rainwater used saves 1-2 kWh of utility energy.</li>
    </ul>

    <h3>Maintenance & Operating Costs</h3>
    <ul>
      <li><strong>Filter Replacement:</strong> $50-$200/year for sediment and carbon filters depending on water quality and usage volume.</li>
      <li><strong>Pump Maintenance:</strong> $100-$300 every 3-5 years for pump service or replacement. Quality pumps last 10-15 years with proper care.</li>
      <li><strong>Tank Cleaning:</strong> $100-$400 every 2-5 years to remove sediment, inspect for leaks, sanitize if needed. DIY possible for above-ground tanks.</li>
      <li><strong>Gutter Cleaning:</strong> $100-$250 twice yearly (spring/fall) to maintain collection efficiency and prevent clogs. Leaf guards reduce frequency.</li>
      <li><strong>Annual Operating Costs:</strong> $100-$500/year total for typical residential system. Minimal compared to ongoing water bill savings.</li>
    </ul>

    <h3>Best Applications & Candidates</h3>
    <ul>
      <li><strong>High Water Costs:</strong> Areas with water rates $5+/thousand gallons see better ROI. California, Arizona, Texas, Nevada benefit most.</li>
      <li><strong>Drought-Prone Regions:</strong> Southwest, California, parts of Texas, Southeast face water restrictions - rainwater provides backup supply.</li>
      <li><strong>Large Landscapes:</strong> Properties with 5,000+ sq ft of landscaping, pools, extensive gardens benefit from free irrigation water.</li>
      <li><strong>Off-Grid/Rural:</strong> Properties on well water or without municipal service. Rainwater supplements or replaces groundwater extraction.</li>
      <li><strong>New Construction:</strong> Install during building for 30-50% lower costs vs retrofit. Pre-plumbing for rainwater uses reduces installation complexity.</li>
      <li><strong>Environmentally Conscious:</strong> For sustainability-focused homeowners, water independence and stormwater reduction justify investment beyond pure financial ROI.</li>
    </ul>

    <h3>Regulations & Code Compliance</h3>
    <ul>
      <li><strong>State Laws:</strong> Most states allow rainwater harvesting. Texas strongly encourages it. Colorado recently legalized residential collection (limited volume).</li>
      <li><strong>Potable Use Codes:</strong> Using rainwater for drinking requires NSF/ANSI 55 certified treatment, health department approval, plumbing code compliance in most jurisdictions.</li>
      <li><strong>Plumbing Requirements:</strong> Indoor rainwater systems need dual plumbing (rainwater + municipal backup), backflow prevention, clearly marked pipes, air gaps.</li>
      <li><strong>Building Permits:</strong> Large systems (500+ gallon tanks) typically require permits ($100-$500). Structural considerations for heavy tanks (8.3 lbs/gallon).</li>
      <li><strong>HOA Restrictions:</strong> Check covenants - some HOAs restrict visible tanks. Underground cisterns or screening/landscaping may address aesthetic concerns.</li>
    </ul>

    <h3>How to Use This Calculator</h3>
    <p>Enter your system costs (tanks, filtration, installation), roof collection area, local annual rainfall, current water rates, available rebates, and estimated annual maintenance costs. The calculator computes your annual water collection potential, bill savings, net system cost, payback period, and 20-year ROI to help determine if rainwater harvesting makes financial sense for your property.</p>
  `,
  },
  calculator: {
    fields: [
      {
        name: 'tankStorageCost',
        label: 'Water Storage Tank(s) Cost ($)',
        type: 'number',
        defaultValue: 6000,
      },
      {
        name: 'filtrationPumpCost',
        label: 'Filtration & Pump System ($)',
        type: 'number',
        defaultValue: 2500,
      },
      {
        name: 'guttersPlumbingCost',
        label: 'Gutters & Plumbing Installation ($)',
        type: 'number',
        defaultValue: 3500,
      },
      {
        name: 'utilityRebates',
        label: 'Utility Rebates & Incentives ($)',
        type: 'number',
        defaultValue: 2000,
      },
      {
        name: 'roofArea',
        label: 'Roof Collection Area (sq ft)',
        type: 'number',
        defaultValue: 2000,
      },
      {
        name: 'annualRainfall',
        label: 'Annual Rainfall (inches)',
        type: 'number',
        defaultValue: 35,
      },
      {
        name: 'waterRatePer1000Gal',
        label: 'Water Rate Per 1,000 Gallons ($)',
        type: 'number',
        defaultValue: 6.50,
      },
      {
        name: 'percentWaterOffset',
        label: 'Percent of Water Bill Offset (%)',
        type: 'number',
        defaultValue: 40,
      },
      {
        name: 'currentAnnualWaterBill',
        label: 'Current Annual Water Bill ($)',
        type: 'number',
        defaultValue: 1200,
      },
      {
        name: 'annualMaintenanceCost',
        label: 'Annual Maintenance Cost ($)',
        type: 'number',
        defaultValue: 250,
      },
    ],
    results: [
      {
        name: 'totalSystemCost',
        label: 'Total System Cost',
        format: 'currency',
      },
      {
        name: 'netCostAfterRebates',
        label: 'Net Cost After Rebates',
        format: 'currency',
      },
      {
        name: 'annualCollectionPotential',
        label: 'Annual Water Collection Potential',
        format: 'number',
        suffix: ' gallons',
      },
      {
        name: 'annualWaterSavings',
        label: 'Annual Water Bill Savings',
        format: 'currency',
      },
      {
        name: 'netAnnualSavings',
        label: 'Net Annual Savings (After Maintenance)',
        format: 'currency',
      },
      {
        name: 'paybackPeriod',
        label: 'Payback Period',
        format: 'years',
      },
      {
        name: 'twentyYearSavings',
        label: '20-Year Total Savings',
        format: 'currency',
      },
      {
        name: 'twentyYearROI',
        label: '20-Year ROI',
        format: 'percentage',
      },
    ],
    calculate: (inputs: Record<string, number>) => {
      const totalSystemCost = 
        inputs.tankStorageCost +
        inputs.filtrationPumpCost +
        inputs.guttersPlumbingCost;
      
      const netCostAfterRebates = totalSystemCost - inputs.utilityRebates;
      
      // Calculate annual collection: roof area * rainfall * 0.6 (conversion factor accounting for 90% efficiency)
      const annualCollectionPotential = inputs.roofArea * inputs.annualRainfall * 0.6;
      
      const annualWaterSavings = inputs.currentAnnualWaterBill * (inputs.percentWaterOffset / 100);
      const netAnnualSavings = annualWaterSavings - inputs.annualMaintenanceCost;
      
      const paybackPeriod = netAnnualSavings > 0 ? netCostAfterRebates / netAnnualSavings : 0;
      const twentyYearSavings = (netAnnualSavings * 20) - netCostAfterRebates;
      const twentyYearROI = netCostAfterRebates > 0 ? (twentyYearSavings / netCostAfterRebates) * 100 : 0;

      return {
        totalSystemCost,
        netCostAfterRebates,
        annualCollectionPotential: Math.round(annualCollectionPotential),
        annualWaterSavings,
        netAnnualSavings,
        paybackPeriod,
        twentyYearSavings,
        twentyYearROI,
      };
    },
  },
};

import { CalculatorContent } from "@/types";

export const coBuyingWithFriendsFamilyCalculator: CalculatorContent = {
  title: "Co-Buying (with Friends/Family) Calculator",
  description:
    "Calculate cost splits, equity shares, and monthly expenses when buying property with friends or family members. Plan fair ownership arrangements.",
  icon: "Icon",
  category: "Lifestyle & Housing",
  slug: "co-buying-with-friends-family-calculator",
  metaTitle: "Co-Buying Property Calculator | Split Costs with Friends or Family",
  metaDescription: "Calculate fair cost splits when buying property with friends or family. Determine equity shares, monthly payments, and exit strategies for co-ownership.",
  article: {
    title: "The Complete Guide to Co-Buying Real Estate with Friends or Family",
    content: `
# Co-Buying Property: Making Shared Home Ownership Work

Rising home prices have made co-buying increasingly popular. Whether partnering with friends, siblings, or extended family, shared property ownership can make homeownership achievable while building wealth together. But success requires clear agreements, fair cost allocation, and careful planning.

## Why Co-Buying Is Growing

### The Affordability Crisis
- Median home prices have outpaced income growth
- Many singles can't qualify for mortgages alone
- Larger down payments required
- Co-buying can double or triple purchasing power

### The Benefits
- **Shared Down Payment**: Pool resources for 20% down
- **Higher Loan Approval**: Combined incomes qualify for more
- **Shared Expenses**: Split mortgage, taxes, maintenance
- **Better Properties**: Afford nicer homes in better locations
- **Built-in Support**: Share household responsibilities
- **Wealth Building**: Build equity together

### Common Co-Buying Scenarios
1. **Unmarried Couples**: Not ready for marriage but ready to own
2. **Best Friends**: Close friends seeking homeownership
3. **Siblings**: Brothers/sisters pooling resources
4. **Parent-Child**: Parents helping adult children enter market
5. **Multi-Generational**: Extended family under one roof
6. **Investment Partners**: Friends investing together

## Types of Co-Ownership

### Tenants in Common (TIC)
- Each owner has a specific % share (doesn't have to be equal)
- Can sell your share independently
- Share passes to heirs, not co-owners
- Most flexible for unequal contributions
- **Best for**: Friends, siblings, investors

### Joint Tenancy
- Equal ownership shares required
- Right of survivorship (share passes to surviving owner)
- Cannot sell share without others' consent
- All must be on title together
- **Best for**: Committed couples, very close family

### LLC Ownership
- Property owned by limited liability company
- Members own shares of LLC
- Liability protection
- More complex and costly to set up
- **Best for**: Investment properties, large groups

## Calculating Fair Equity Shares

### Equal Contribution (50/50 or thirds)
**Example:** Three friends buy $600k home
- Down payment (20%): $120k → $40k each
- Monthly costs split equally
- **Result**: 33.33% equity each

### Unequal Contribution
**Example:** Two buyers, $500k home
- Person A: $75k down (75%)
- Person B: $25k down (25%)
- Monthly costs split 75/25
- **Result**: 75% and 25% equity

### Equal Ownership, Unequal Down Payment
**Example:** Siblings want 50/50 despite unequal down payments
- Person A: $60k down
- Person B: $40k down
- Person B owes $10k to Person A
- **Options**:
  - Person B pays back $10k over time with interest
  - Formalize as loan from A to B
  - B contributes more to monthly costs until balanced

## Monthly Cost Allocation

### Fixed Costs to Split
- Mortgage payment (principal + interest)
- Property taxes
- Homeowners insurance
- HOA fees
- Utilities (if split)

### Variable Considerations
**Usage-Based:**
- Larger bedroom = higher share?
- Master suite with bathroom = premium?
- Parking spaces assigned?

**Income-Based:**
- Should higher earner pay more?
- Pros: More fair given income disparity
- Cons: Can create resentment

**Equal Split:**
- Simplest and cleanest
- Works best when living situations are similar
- Avoids complicated tracking

## Real-World Example

**Sarah and Mike buy a $400k condo:**

**Purchase Costs:**
- Down payment (20%): $80,000
  - Sarah: $50,000 (62.5%)
  - Mike: $30,000 (37.5%)
- Closing costs: $12,000 (split equally)
  - Each pays: $6,000

**Monthly Costs:**
- Mortgage (P&I): $2,100
- Property tax: $350
- Insurance: $150
- HOA: $400
- **Total: $3,000/month**

**Option 1: Split Proportional to Equity**
- Sarah (62.5%): $1,875/month
- Mike (37.5%): $1,125/month

**Option 2: Equal Monthly, Adjust Equity Over Time**
- Each pays $1,500/month
- Sarah's equity decreases to 50% over time
- Takes 80 months for Mike to reach equal equity

**Option 3: Sarah Loans Mike**
- Split everything 50/50
- Mike owes Sarah $20k note at 5% interest
- Mike pays extra $360/month for 5 years to repay

## Critical Legal Documents

### Co-Ownership Agreement

Essential elements:
1. **Ownership Percentages**: Clear equity shares
2. **Expense Allocation**: Who pays what monthly
3. **Decision Making**: Major decisions (renovations, selling)
4. **Buyout Process**: How one party can buy out another
5. **Dispute Resolution**: Mediation, arbitration process
6. **Death Provisions**: What happens if owner dies
7. **Sale Trigger Events**: Job relocation, marriage, etc.
8. **Right of First Refusal**: Must offer share to co-owner first

### Property Sharing Agreement

Additional details:
- House rules and expectations
- Guest policies
- Pet agreements
- Maintenance responsibilities
- Noise/privacy considerations

### Partnership Agreement (for LLCs)
- Operating agreement for LLC
- Manager responsibilities
- Distribution of rental income
- Capital call procedures

## Financial Planning Considerations

### Tax Implications

**Mortgage Interest Deduction:**
- Each owner deducts their portion
- Must be on mortgage to deduct
- Up to $750k mortgage limit (combined)

**Property Tax Deduction:**
- Each deducts their share
- $10k SALT limit per taxpayer

**Capital Gains:**
- Each owner's portion subject to capital gains
- May not qualify for primary residence exclusion
- Depends on occupancy requirements

### Building Equity Fairly

**Principal Paydown:**
- Who gets credit for equity from principal payments?
- Match equity share to payment contributions
- Track contributions carefully

**Improvements and Upgrades:**
- How to handle one person funding renovation?
- Options:
  - Increase their equity %
  - Other owner pays back half
  - Treat as personal loan
  - Factor into eventual sale

**Appreciation:**
- Distributed according to equity %
- Example: 60/40 split, home appreciates $100k
  - Owner A gets $60k
  - Owner B gets $40k

### Exit Strategies

**Voluntary Buyout:**
1. Get property appraised
2. Calculate equity share
3. Buying party gets new mortgage or pays cash
4. Selling party gets their equity out

**Example:**
- Original purchase: $400k
- Current value: $500k
- Remaining mortgage: $300k
- Equity: $200k
- Person leaving (50% share): Gets $100k

**Forced Sale:**
- If parties can't agree
- "Partition action" lawsuit
- Court orders sale
- Expensive and contentious
- **Avoid with good co-ownership agreement**

**Sale to Third Party:**
- Both agree to sell
- Proceeds split per equity %
- Pay off mortgage first
- Distribute remaining to owners

## Common Problems and Solutions

### Problem: One Person Wants Out Early

**Solution:**
- Build buyout process into original agreement
- Set appraisal methodology
- Define payment terms (lump sum vs. over time)
- Right of first refusal for remaining owner
- Pre-agreed timeline for new mortgage

### Problem: One Person Can't Pay Their Share

**Solution:**
- Grace period defined in agreement
- Other owner can cover temporarily
- Missed payments reduce equity %
- Default triggers buyout option
- Consider requiring disability/life insurance

### Problem: One Person Wants to Rent Their Share

**Solution:**
- Agreement should address this upfront
- Will rentals be allowed?
- Must other owner approve tenant?
- How is rental income handled?
- Does renting change equity %?

### Problem: Different Standards (Cleanliness, Maintenance)

**Solution:**
- Discuss expectations upfront
- Written house rules
- Regular house meetings
- Hire cleaning service (split cost)
- Mediation clause in agreement

### Problem: Relationship Changes (Marriage, Kids)

**Solution:**
- Build trigger events into agreement
- Marriage triggers buyout option
- Having kids triggers buyout option
- Set reasonable timelines (6-12 months)
- Plan for life changes

## When Co-Buying Makes Sense

Good indicators:
- ✅ Clear, written agreement in place
- ✅ Similar financial responsibility levels
- ✅ Compatible living styles
- ✅ Long-term commitment (5+ years)
- ✅ Similar income levels (or agreement on equity split)
- ✅ Good communication skills
- ✅ Both have stable employment
- ✅ Shared vision for the property
- ✅ Exit strategy defined upfront

## When to Reconsider

Red flags:
- ❌ Vastly different incomes causing resentment
- ❌ One person planning to move soon
- ❌ Poor communication or unresolved conflicts
- ❌ Different cleanliness/lifestyle standards
- ❌ One person has bad credit affecting loan
- ❌ Can't afford lawyer for proper agreements
- ❌ Thinking you can "figure it out later"
- ❌ Relationship is already strained

## Professional Help Needed

### Real Estate Attorney
- **Cost**: $1,000-$3,000
- **Worth it**: Absolutely essential
- Creates co-ownership agreement
- Ensures proper title holding
- State-specific legal protections

### Financial Advisor
- Tax planning for co-ownership
- Estate planning considerations
- Investment strategy alignment

### Mortgage Broker
- Finds lenders for co-borrowers
- Compares joint vs. individual financing
- Helps structure loan optimally

## Alternative: Shared Equity Programs

Some cities and nonprofits offer:
- Government helps with down payment
- In exchange for % of appreciation
- City/agency is silent co-owner
- Buyout option after several years
- Makes homeownership more accessible

## Bottom Line

Co-buying can be a smart way to enter the housing market, but it requires:
1. **Absolute transparency** about finances and expectations
2. **Legal documentation** - proper agreements are non-negotiable
3. **Compatible co-owners** - choose partners carefully
4. **Clear exit strategy** - plan for the end from the beginning
5. **Ongoing communication** - regular check-ins about the arrangement

Many successful co-buying arrangements last 5-10 years, allowing both parties to build significant equity before moving on to sole ownership situations.

Use our calculator above to determine fair cost splits and equity arrangements for your specific co-buying scenario. A well-structured agreement from day one can prevent 95% of potential problems and set everyone up for success.
    `,
  },
  calculator: {
    fields: [
      {
        name: "purchasePrice",
        label: "Property Purchase Price",
        type: "number",
        defaultValue: "500000",
      },
      {
        name: "downPaymentTotal",
        label: "Total Down Payment",
        type: "number",
        defaultValue: "100000",
      },
      {
        name: "buyer1DownPayment",
        label: "Buyer 1 Down Payment Contribution",
        type: "number",
        defaultValue: "60000",
      },
      {
        name: "buyer2DownPayment",
        label: "Buyer 2 Down Payment Contribution",
        type: "number",
        defaultValue: "40000",
      },
      {
        name: "interestRate",
        label: "Mortgage Interest Rate (%)",
        type: "number",
        defaultValue: "7",
      },
      {
        name: "loanTerm",
        label: "Loan Term (Years)",
        type: "number",
        defaultValue: "30",
      },
      {
        name: "monthlyPropertyTax",
        label: "Monthly Property Tax",
        type: "number",
        defaultValue: "400",
      },
      {
        name: "monthlyInsurance",
        label: "Monthly Insurance",
        type: "number",
        defaultValue: "200",
      },
      {
        name: "monthlyHOA",
        label: "Monthly HOA Fee",
        type: "number",
        defaultValue: "250",
      },
      {
        name: "monthlyUtilities",
        label: "Monthly Utilities",
        type: "number",
        defaultValue: "300",
      },
      {
        name: "annualMaintenance",
        label: "Annual Maintenance Budget",
        type: "number",
        defaultValue: "6000",
      },
    ],
    results: [
      {
        label: "Buyer 1 Equity Share",
        isCurrency: false,
      },
      {
        label: "Buyer 2 Equity Share",
        isCurrency: false,
      },
      {
        label: "Monthly Mortgage Payment",
        isCurrency: true,
      },
      {
        label: "Total Monthly Costs",
        isCurrency: true,
      },
      {
        label: "Buyer 1 Monthly Payment (Proportional)",
        isCurrency: true,
      },
      {
        label: "Buyer 2 Monthly Payment (Proportional)",
        isCurrency: true,
      },
      {
        label: "If Split 50/50, Buyer 1 Gets Back",
        isCurrency: true,
      },
      {
        label: "If Split 50/50, Buyer 2 Owes",
        isCurrency: true,
      },
    ],
    calculate: (values) => {
      const {
        purchasePrice,
        downPaymentTotal,
        buyer1DownPayment,
        buyer2DownPayment,
        interestRate,
        loanTerm,
        monthlyPropertyTax,
        monthlyInsurance,
        monthlyHOA,
        monthlyUtilities,
        annualMaintenance,
      } = values;

      // Parse inputs
      const price = parseFloat(purchasePrice);
      const totalDown = parseFloat(downPaymentTotal);
      const buyer1Down = parseFloat(buyer1DownPayment);
      const buyer2Down = parseFloat(buyer2DownPayment);
      const rate = parseFloat(interestRate) / 100 / 12;
      const term = parseInt(loanTerm) * 12;
      const propTax = parseFloat(monthlyPropertyTax);
      const insurance = parseFloat(monthlyInsurance);
      const hoa = parseFloat(monthlyHOA);
      const utilities = parseFloat(monthlyUtilities);
      const maintenance = parseFloat(annualMaintenance) / 12;

      // Calculate equity shares based on down payment
      const buyer1Equity = (buyer1Down / totalDown) * 100;
      const buyer2Equity = (buyer2Down / totalDown) * 100;

      // Calculate loan amount and mortgage payment
      const loanAmount = price - totalDown;
      const monthlyPayment = loanAmount * (rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);

      // Calculate total monthly costs
      const totalMonthlyCost = monthlyPayment + propTax + insurance + hoa + utilities + maintenance;

      // Calculate proportional monthly payments
      const buyer1Monthly = totalMonthlyCost * (buyer1Equity / 100);
      const buyer2Monthly = totalMonthlyCost * (buyer2Equity / 100);

      // Calculate adjustments for 50/50 split
      const difference = buyer1Down - buyer2Down;
      const buyer1GetsBack = difference > 0 ? difference / 2 : 0;
      const buyer2Owes = difference > 0 ? difference / 2 : Math.abs(difference) / 2;

      return [
        {
          label: "Buyer 1 Equity Share",
          value: buyer1Equity.toFixed(2) + "%",
          isCurrency: false,
        },
        {
          label: "Buyer 2 Equity Share",
          value: buyer2Equity.toFixed(2) + "%",
          isCurrency: false,
        },
        {
          label: "Monthly Mortgage Payment",
          value: monthlyPayment.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Total Monthly Costs",
          value: totalMonthlyCost.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Buyer 1 Monthly Payment (Proportional)",
          value: buyer1Monthly.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Buyer 2 Monthly Payment (Proportional)",
          value: buyer2Monthly.toFixed(2),
          isCurrency: true,
        },
        {
          label: "If Split 50/50, Buyer 1 Gets Back",
          value: buyer1GetsBack.toFixed(2),
          isCurrency: true,
        },
        {
          label: "If Split 50/50, Buyer 2 Owes",
          value: buyer2Owes.toFixed(2),
          isCurrency: true,
        },
      ];
    },
  },
};

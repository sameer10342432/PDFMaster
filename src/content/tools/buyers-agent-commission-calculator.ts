import { CalculatorContent } from '@/types';

export const BUYERS_AGENT_COMMISSION_CALCULATOR_CONTENT: CalculatorContent = {
  title: "Buyer's Agent Commission Calculator",
  description: "Calculate buyer's agent commission earnings including split structures, transaction fees, and net take-home pay from buyer representation deals.",
  icon: 'Icon',
  category: 'Agent Tools',
  slug: 'buyers-agent-commission-calculator',
  article: {
    title: "Buyer's Agent Commission Calculator: Calculate Your Earnings from Buyer Representation",
    content: `
Understanding your take-home commission as a buyer's agent is crucial for financial planning and evaluating deal profitability. This calculator helps you determine your actual earnings after all splits and fees.

### Buyer's Agent Commission Structure

**Traditional Commission Model:**
- Total commission: Typically 5-6% of sale price
- Split between listing and buyer's agent: Usually 50/50
- Buyer's agent gross commission: 2.5-3% of sale price
- Example: $400,000 sale ร 3% = $12,000 gross commission

**New Compensation Models (Post-NAR Settlement):**
- Negotiable buyer's agent compensation
- Potentially paid directly by buyer
- Can be flat fee instead of percentage
- May vary significantly by transaction

### Commission Split Breakdown

**Your Commission Flow:**
1. Total commission from sale
2. Split to buyer's brokerage
3. Brokerage split with you
4. Transaction fees deducted
5. Your net commission

**Common Brokerage Splits:**
- New agents: 50/50 to 60/40 (agent keeps less)
- Mid-level agents: 60/40 to 70/30
- Experienced agents: 70/30 to 80/20
- Top producers: 80/20 to 90/10
- 100% commission brokerages: Agent keeps all, pays monthly fee

### Industry Benchmarks

**Average Buyer's Agent Commission by Price Range:**
- $200,000 home: $5,000-6,000 gross ($2,500-4,000 net)
- $300,000 home: $7,500-9,000 gross ($3,750-6,000 net)
- $400,000 home: $10,000-12,000 gross ($5,000-8,000 net)
- $500,000 home: $12,500-15,000 gross ($6,250-10,000 net)
- $1,000,000 home: $25,000-30,000 gross ($12,500-20,000 net)

**Average Take-Home Percentages:**
- After 60/40 split: 60% of gross
- After transaction fees: 55-58% of gross
- After all costs: 50-55% of gross
- First-year agents: 35-45% of gross (higher brokerage split)
- Experienced agents: 60-75% of gross (better splits)

### Transaction Fees and Deductions

**Common Brokerage Fees:**
- Transaction coordinator fee: $200-500 per deal
- Broker administrative fee: $150-400 per deal
- E&O insurance: $50-150 per deal
- Technology/CRM fee: $25-100 per deal
- MLS fees: $25-50 per deal
- Total typical fees: $450-1,200 per transaction

**Other Deductions:**
- Desk fees (some brokerages): $200-800/month
- Franchise fees: 5-8% of commission
- Team splits (if applicable): 20-50% of commission
- Referral fees (if applicable): 20-35% of commission

### Calculating Your Net Commission

**Example Calculation:**
- Purchase price: $400,000
- Buyer's agent commission: 2.5%
- Gross commission: $10,000
- Brokerage split: 70/30 (agent keeps 70%)
- Agent portion: $7,000
- Transaction fees: $500
- **Net to agent: $6,500**

**With Additional Costs:**
- Net from above: $6,500
- Franchise fee (6%): $420
- Referral fee (if applicable 25%): $1,625
- **Final net: $4,455 (44.5% of gross)**

### Improving Your Commission Income

**Increase Take-Home Percentage:**
1. **Negotiate Better Split**
   - Higher production = leverage for better terms
   - Shop brokerages for competitive offers
   - Consider 100% commission models at higher volume

2. **Reduce Transaction Fees**
   - Negotiate cap on fees
   - Choose low-fee brokerages
   - High-volume discounts

3. **Minimize Referral Dependency**
   - Build your own lead sources
   - Develop sphere of influence
   - Create organic marketing

4. **Increase Average Sale Price**
   - Target higher price points
   - Become luxury market specialist
   - Focus on move-up buyers

**Increase Transaction Volume:**
- Better time management
- Buyer specialization
- Team leverage
- Efficient systems
- Pre-approval focus
- Virtual tools

### Buyer's Agent Specific Considerations

**Time Investment vs. Commission:**
Average buyer's agent hours per transaction:
- Initial consultation: 1-2 hours
- Property search setup: 1-2 hours
- Showings: 10-20 hours
- Offer and negotiation: 3-5 hours
- Inspection and due diligence: 5-8 hours
- Closing coordination: 2-4 hours
- **Total: 22-41 hours per transaction**

**Effective Hourly Rate:**
- $6,500 net รท 30 hours = $217/hour
- $4,500 net รท 40 hours = $113/hour
- $3,000 net รท 50 hours = $60/hour

**Improving Hourly Rate:**
- Qualify buyers better (pre-approval required)
- Use technology for search automation
- Limit showing radius
- Set clear buyer criteria
- Focus on ready-to-act buyers

### Compensation Models Comparison

**Traditional Percentage:**
- Pros: Scales with price, industry standard
- Cons: Decreases your hourly rate on lower prices

**Flat Fee:**
- Pros: Predictable income, better for lower prices
- Cons: May limit high-price opportunities

**Hourly Rate:**
- Pros: Guarantees compensation for time
- Cons: Buyer resistance, not common

**Retainer + Commission:**
- Pros: Upfront payment, qualified buyers
- Cons: Market resistance, requires strong positioning

### Geographic Variations

**High-Cost Markets (SF, NYC, Boston):**
- Higher gross commissions
- Higher splits competitive
- More fee compression
- Average net: $8,000-15,000 per deal

**Mid-Market Areas:**
- Standard commission rates
- Traditional splits
- Moderate fees
- Average net: $4,000-8,000 per deal

**Lower-Cost Markets:**
- Lower gross commissions
- Sometimes higher percentage rates
- Lower overhead
- Average net: $2,500-5,000 per deal

### Tax Considerations

**Your Commission is Self-Employment Income:**
- Subject to self-employment tax (15.3%)
- Must pay quarterly estimated taxes
- Deductible business expenses
- Consider S-Corp election at higher income

**Estimated Tax Impact:**
- $50,000 income: ~$7,500 in self-employment tax
- $100,000 income: ~$15,300 in self-employment tax
- Plus federal and state income tax

**Net After Taxes (example):**
- Gross commission: $10,000
- Net to you: $6,500
- Self-employment tax (15.3%): $995
- Income tax (22% bracket): $1,210
- **Take-home after taxes: $4,295**

### Commission Cap Structures

**Annual Production Caps:**
Many brokerages offer caps where you keep 100% after reaching threshold:
- Cap at $10,000-25,000 paid to broker
- After cap: 100% commission to agent
- Benefits high producers significantly

**Example with Cap:**
- Cap: $18,000 to broker
- Split: 70/30 (broker gets 30%)
- Reach cap at: $60,000 in gross commissions
- After cap: Keep 100% of remaining deals
- Significant savings for top producers

### Choosing the Right Brokerage Model

**100% Commission Brokerages:**
- Monthly fee: $500-2,000
- Keep all commission
- Best for: 8+ transactions/year
- Breakeven: Calculate monthly fee vs. split savings

**Traditional Brokerages:**
- Better training and support
- More structure
- Best for: New agents or those wanting support
- Lower monthly overhead

**Hybrid Models:**
- Combination of benefits
- Graduated splits based on production
- Modern technology platforms
- Best for: Mid-level agents

## How to Use This Calculator

Enter your deal details:
1. Purchase price
2. Buyer's agent commission rate (%)
3. Your brokerage split (% you keep)
4. Transaction fees
5. Additional deductions (franchise, referral, etc.)
6. Number of transactions per year

Get detailed commission breakdown and annual earnings projections.
`,
  },
  calculator: {
    fields: [
      {
        name: 'purchasePrice',
        label: 'Purchase Price ($)',
        type: 'number',
        defaultValue: 400000,
      },
      {
        name: 'commissionRate',
        label: "Buyer's Agent Commission Rate (%)",
        type: 'number',
        defaultValue: 2.5,
      },
      {
        name: 'agentSplit',
        label: 'Your Brokerage Split (% you keep)',
        type: 'number',
        defaultValue: 70,
      },
      {
        name: 'transactionFees',
        label: 'Transaction Fees per Deal ($)',
        type: 'number',
        defaultValue: 500,
      },
      {
        name: 'franchiseFee',
        label: 'Franchise Fee (%)',
        type: 'number',
        defaultValue: 0,
      },
      {
        name: 'referralFee',
        label: 'Referral Fee (%)',
        type: 'number',
        defaultValue: 0,
      },
      {
        name: 'hoursSpent',
        label: 'Hours Spent on Transaction',
        type: 'number',
        defaultValue: 30,
      },
      {
        name: 'annualTransactions',
        label: 'Annual Transactions',
        type: 'number',
        defaultValue: 12,
      },
    ],
    results: [
      { label: 'Gross Commission', isCurrency: true },
      { label: 'After Brokerage Split', isCurrency: true },
      { label: 'After Transaction Fees', isCurrency: true },
      { label: 'After Franchise Fee', isCurrency: true },
      { label: 'Net Commission (After Referral Fee)', isCurrency: true },
      { label: 'Effective Commission %', isCurrency: false },
      { label: 'Effective Hourly Rate', isCurrency: true },
      { label: 'Projected Annual Income', isCurrency: true },
    ],
    calculate: (data) => {
      const {
        purchasePrice,
        commissionRate,
        agentSplit,
        transactionFees,
        franchiseFee,
        referralFee,
        hoursSpent,
        annualTransactions,
      } = data;

      const grossCommission = parseFloat(purchasePrice) * (parseFloat(commissionRate) / 100);
      const afterSplit = grossCommission * (parseFloat(agentSplit) / 100);
      const afterFees = afterSplit - parseFloat(transactionFees);
      const franchiseFeeAmount = afterFees * (parseFloat(franchiseFee) / 100);
      const afterFranchise = afterFees - franchiseFeeAmount;
      const referralFeeAmount = afterFranchise * (parseFloat(referralFee) / 100);
      const netCommission = afterFranchise - referralFeeAmount;
      const effectivePercentage = (netCommission / grossCommission) * 100;
      const hours = parseFloat(hoursSpent);
      const hourlyRate = hours > 0 ? netCommission / hours : 0;
      const annualIncome = netCommission * parseInt(annualTransactions);

      return [
        { label: 'Gross Commission', value: `$${grossCommission.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },
        { label: 'After Brokerage Split', value: `$${afterSplit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },
        { label: 'After Transaction Fees', value: `$${afterFees.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },
        { label: 'After Franchise Fee', value: `$${afterFranchise.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },
        { label: 'Net Commission (After Referral Fee)', value: `$${netCommission.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` },
        { label: 'Effective Commission %', value: `${effectivePercentage.toFixed(1)}% of gross` },
        { label: 'Effective Hourly Rate', value: `$${hourlyRate.toFixed(2)}/hour` },
        { label: 'Projected Annual Income', value: `$${annualIncome.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 0 })}` },
      ];
    },
  },
};

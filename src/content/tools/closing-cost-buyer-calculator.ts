import { CalculatorContent } from "@/types";

export const CLOSING_COST_BUYER_CALCULATOR_CONTENT: CalculatorContent = {
  title: "Buyer Closing Cost Calculator | Complete Homebuyer Closing Costs Breakdown",
  description:
    "Calculate all closing costs for home buyers including loan fees, title insurance, escrow, taxes, and hidden fees. Know exactly how much cash you need to close on your home purchase.",
  icon: "Icon",
  category: "Calculators",
  slug: "closing-cost-buyer-calculator",
  article: {
    title: "Complete Buyer Closing Costs Guide: Every Fee Explained",
    content: `# Buyer Closing Cost Calculator: Complete Cost Breakdown

Closing costs are the fees and expenses you pay when finalizing a home purchase. This calculator helps you estimate all costs so you're not surprised on closing day.

## What Are Closing Costs?

**Definition**: One-time fees paid when you finalize your home purchase, separate from your down payment.

**Typical range**: 2-5% of purchase price
**Example**: $400,000 home = $8,000-$20,000 in closing costs

## Complete Breakdown of Buyer Closing Costs

### 1. Loan-Related Fees (40-50% of closing costs)

**Origination Fee**: 0.5-1% of loan
- Lender's fee for processing loan
- Often negotiable
- $400k loan = $2,000-$4,000

**Discount Points** (Optional): 1% of loan per point
- Pays down interest rate
- 1 point = 0.25% rate reduction typically
- $400k loan, 1 point = $4,000

**Appraisal Fee**: $400-$800
- Required by lender
- Determines home value
- Paid upfront usually

**Credit Report Fee**: $25-$100
- Pulls your credit
- Per applicant

**Underwriting Fee**: $300-$900
- Reviews loan file
- Verifies information

**Processing Fee**: $300-$600
- Administrative costs
- Loan preparation

**Application Fee**: $0-$500
- Some lenders charge this
- Often waived

**Tax Service Fee**: $50-$100
- Monitors property taxes
- Ensures they're paid

**Flood Certification**: $15-$30
- Determines flood zone
- Required for all loans

### 2. Title and Escrow Fees (20-30% of closing costs)

**Title Search**: $200-$400
- Researches property ownership
- Finds any liens

**Title Insurance**: $1,000-$4,000
- Protects against title defects
- One-time premium
- Based on purchase price

**Escrow/Closing Fee**: $500-$2,000
- Settlement service
- Coordinates closing
- Holds funds

**Attorney Fees** (some states): $500-$2,500
- Required in certain states
- Reviews documents
- Represents you

**Notary Fees**: $50-$200
- Witnesses signatures
- Certifies documents

### 3. Government Fees and Taxes (10-20% of closing costs)

**Recording Fees**: $50-$500
- County records deed
- Public record

**Transfer Taxes** (if applicable): 0.5-3% of price
- State/local taxes
- Varies greatly by location
- Some states exempt first-time buyers

**Property Taxes** (Prorated): Varies
- Pay from closing to end of tax period
- Adjusted for seller's payments

**HOA Transfer Fee** (if applicable): $100-$500
- Homeowners association
- Document transfer

### 4. Prepaid Items (15-25% of closing costs)

**Homeowners Insurance** (1 year): $1,000-$4,000+
- Required by lender
- Paid in full at closing

**Property Taxes** (2-6 months): Varies
- Establishes escrow account
- Usually 2-6 months upfront

**Mortgage Interest** (Prorated): Varies
- Interest from closing to month end
- Closing early = less interest

**HOA Dues** (if applicable): Varies
- Prorated or first month

**PMI** (if applicable): Varies
- First 2 months often
- If down payment < 20%

### 5. Inspection and Survey (5-10% of closing costs)

**Home Inspection**: $300-$600
- Paid before closing usually
- Checks home condition

**Pest Inspection**: $75-$200
- Termite inspection
- Required in some states

**Survey**: $300-$800
- Property boundary verification
- Required by some lenders

**Well/Septic Inspection** (rural): $300-$700
- If applicable
- Water quality testing

### 6. Miscellaneous Fees (5-10% of closing costs)

**Courier Fees**: $30-$100
- Document delivery
- Wire transfers

**Wire Transfer Fee**: $25-$50
- Sending your funds
- Per wire

**Homeowner Warranty** (Optional): $350-$700
- First year coverage
- Protects against repairs

## State-by-State Variations

### High-Cost States

**New York**: 4-6% closing costs
- Higher attorney fees
- Mansion tax (> $1M)
- NYC transfer taxes

**California**: 2-4% closing costs
- Higher title insurance
- Local transfer taxes vary

**Pennsylvania**: 4-5% closing costs
- High transfer taxes
- Local taxes additional

### Moderate-Cost States

**Texas**: 2-4% closing costs
- No state transfer tax
- Title insurance regulated

**Florida**: 2-3% closing costs
- Competitive title insurance
- Doc stamps on deed

**Illinois**: 3-4% closing costs
- Transfer tax (varies by county)
- Attorney state

### Lower-Cost States

**Indiana**: 2-3% closing costs
- Lower title insurance
- Minimal taxes

**Missouri**: 2-3% closing costs
- Competitive market
- Lower fees

**North Carolina**: 2-3% closing costs
- Attorney state
- Reasonable fees

## Sample Closing Cost Estimates

### $300,000 Home Purchase
**20% Down ($60,000), Conventional Loan**

Loan Fees: $3,500
- Origination: $2,400
- Appraisal: $600
- Credit/Misc: $500

Title/Escrow: $2,200
- Title insurance: $1,500
- Escrow fee: $700

Government Fees: $800
- Recording: $250
- Transfer tax: $550

Prepaids: $3,000
- Insurance: $1,500
- Taxes (3 months): $900
- Interest: $600

Inspections: $500
- Home: $400
- Pest: $100

**Total**: ~$10,000 (3.3% of price)

### $500,000 Home Purchase
**10% Down ($50,000), Conventional Loan**

Loan Fees: $5,500
- Origination: $4,050
- Appraisal: $700
- Misc: $750

Title/Escrow: $3,500
- Title insurance: $2,400
- Escrow fee: $1,100

Government Fees: $2,000
- Recording: $300
- Transfer tax: $1,700

Prepaids: $5,500
- Insurance: $2,000
- PMI (2 months): $450
- Taxes: $2,200
- Interest: $850

Inspections: $600

**Total**: ~$17,100 (3.4% of price)

## Ways to Reduce Closing Costs

### 1. Shop Lenders
- Compare loan estimates
- Negotiate fees
- Get multiple quotes

### 2. Ask Seller to Pay
- "Seller concessions"
- Up to 3-6% (loan dependent)
- Increases offer price usually

### 3. Close at Month End
- Less prepaid interest
- Saves hundreds

### 4. Skip Optional Fees
- Don't buy discount points
- Waive home warranty
- Skip unnecessary inspections

### 5. Negotiate with Lender
- Waive application fee
- Reduce origination fee
- Shop title insurance

### 6. First-Time Buyer Programs
- State assistance
- Grant programs
- Fee waivers

## Seller Concessions Strategy

**What are concessions?**
Seller pays some/all of your closing costs

**Limits**:
- Conventional: 3-6% based on down payment
- FHA: 6%
- VA: 4%
- USDA: 6%

**Example**:
- Price: $400,000
- Offer: $405,000 with $5,000 seller credit
- Net to seller: $400,000
- Your closing costs reduced by $5,000

**Works best when**:
- You have cash for down but not closing
- Seller's market (need competitive edge)
- Home appraised value supports higher price

## Cash Needed at Closing

### Formula:
Down payment + Closing costs - Seller concessions - Lender credits = Cash needed

### Example:
- Purchase price: $350,000
- Down payment (20%): $70,000
- Closing costs: $10,500
- Seller concessions: $3,000
- **Cash needed**: $77,500

### Sources of Cash:
âœ… Savings
âœ… Gift from family (must be documented)
âœ… 401k loan (not recommended)
âœ… Sale of investments
âœ… Down payment assistance programs

âŒ Personal loan (not allowed)
âŒ Credit cards (not allowed)
âŒ Undocumented gifts

## Common Buyer Mistakes

### Mistake #1: Not Budgeting for Closing
**Problem**: Scrambling for cash at last minute

**Solution**: Save 3-5% of purchase price for closing

### Mistake #2: Accepting First Loan Estimate
**Problem**: Overpaying on fees

**Solution**: Shop at least 3 lenders

### Mistake #3: Not Reading Closing Disclosure
**Problem**: Surprise fees on closing day

**Solution**: Review 3 days before, question everything

### Mistake #4: Choosing Wrong Closing Date
**Problem**: Higher prepaid interest

**Solution**: Close end of month

### Mistake #5: Forgetting Moving Costs
**Problem**: Broke after closing

**Solution**: Budget extra $2,000-5,000 for moving

## Timeline and Documents

### 3 Days Before Closing
**Receive**: Closing Disclosure
**Review**: All fees, loan terms, payment
**Compare**: To Loan Estimate
**Question**: Any changes or surprises

### Day Before Closing
**Confirm**: Closing time and location
**Gather**: Photo ID, cashier's check/wire info
**Review**: Final walkthrough schedule

### Closing Day
**Bring**:
- Photo ID
- Cashier's check or wire confirmation
- Proof of homeowners insurance
- Any requested documents

**Sign**: 50-100+ documents
**Receive**: Keys!

## Using This Calculator

Input:
- Purchase price
- Down payment percentage
- Loan type (Conventional, FHA, VA)
- State/location
- Closing date

Output:
- Itemized closing cost breakdown
- Total cash needed
- Monthly payment with escrow
- Comparison shopping suggestions
- Fee reduction opportunities
    `,
  },
  calculator: {
    fields: [
      {
        name: "purchasePrice",
        label: "Purchase Price ($)",
        type: "number",
        defaultValue: "400000",
      },
      {
        name: "downPaymentPercent",
        label: "Down Payment (%)",
        type: "number",
        defaultValue: "20",
      },
      {
        name: "loanType",
        label: "Loan Type",
        type: "select",
        options: [
          { value: "conventional", label: "Conventional" },
          { value: "fha", label: "FHA" },
          { value: "va", label: "VA" },
          { value: "usda", label: "USDA" }
        ],
        defaultValue: "conventional",
      },
      {
        name: "stateLevel",
        label: "State Closing Cost Level",
        type: "select",
        options: [
          { value: "low-cost-state", label: "Low cost state" },
          { value: "average-cost-state", label: "Average cost state" },
          { value: "high-cost-state", label: "High cost state" }
        ],
        defaultValue: "average-cost-state",
      },
      {
        name: "sellerConcessions",
        label: "Seller Concessions ($)",
        type: "number",
        defaultValue: "0",
      },
    ],
    results: [
      {
        label: "Total Closing Costs",
        isCurrency: true,
      },
      {
        label: "Closing Costs Breakdown",
        isCurrency: false,
      },
      {
        label: "Total Cash Needed at Closing",
        isCurrency: true,
      },
      {
        label: "Closing Costs as % of Price",
        isCurrency: false,
      },
      {
        label: "Cost Reduction Tips",
        isCurrency: false,
      },
    ],
    calculate: (values) => {
      const {
        purchasePrice,
        downPaymentPercent,
        loanType,
        stateLevel,
        sellerConcessions,
      } = values;

      const price = parseFloat(purchasePrice);
      const downPct = parseFloat(downPaymentPercent) / 100;
      const concessions = parseFloat(sellerConcessions);
      const loanAmount = price * (1 - downPct);

      // Base percentages by loan type
      let loanFeePct = 0.01; // 1% default
      if (loanType === "fha") loanFeePct = 0.015;
      else if (loanType === "va") loanFeePct = 0.01;
      else if (loanType === "usda") loanFeePct = 0.01;

      // State multiplier
      let stateMultiplier = 1.0;
      if (stateLevel === "low-cost-state") stateMultiplier = 0.8;
      else if (stateLevel === "high-cost-state") stateMultiplier = 1.4;

      // Calculate individual components
      const loanFees = loanAmount * loanFeePct + 1500; // Origination + fixed fees
      const appraisal = 600;
      const creditReport = 50;
      const titleInsurance = price * 0.005;
      const escrowFee = 500 + (price * 0.001);
      const recordingFees = 250 * stateMultiplier;
      const transferTax = price * 0.01 * (stateMultiplier - 0.5); // Varies greatly
      const homeownersIns = 1500;
      const propertyTaxEscrow = (price * 0.012) / 4; // 3 months
      const inspection = 500;

      const subtotal = loanFees + appraisal + creditReport + titleInsurance + escrowFee + 
                       recordingFees + transferTax + homeownersIns + propertyTaxEscrow + inspection;

      const totalClosingCosts = subtotal * stateMultiplier;
      const downPayment = price * downPct;
      const totalCashNeeded = downPayment + totalClosingCosts - concessions;
      const closingCostPercent = (totalClosingCosts / price) * 100;

      const breakdown = `
ðŸ’° DETAILED BREAKDOWN:

ðŸ“‹ Loan-Related Fees: $${(loanFees + appraisal + creditReport).toLocaleString(undefined, {maximumFractionDigits: 0})}
  â€¢ Loan origination: $${loanFees.toLocaleString(undefined, {maximumFractionDigits: 0})}
  â€¢ Appraisal: $${appraisal}
  â€¢ Credit report: $${creditReport}

ðŸ›ï¸ Title & Escrow: $${(titleInsurance + escrowFee).toLocaleString(undefined, {maximumFractionDigits: 0})}
  â€¢ Title insurance: $${titleInsurance.toLocaleString(undefined, {maximumFractionDigits: 0})}
  â€¢ Escrow/settlement: $${escrowFee.toLocaleString(undefined, {maximumFractionDigits: 0})}

ðŸ“ Government Fees: $${(recordingFees + transferTax).toLocaleString(undefined, {maximumFractionDigits: 0})}
  â€¢ Recording fees: $${recordingFees.toLocaleString(undefined, {maximumFractionDigits: 0})}
  â€¢ Transfer taxes: $${transferTax.toLocaleString(undefined, {maximumFractionDigits: 0})}

ðŸ’µ Prepaids: $${(homeownersIns + propertyTaxEscrow).toLocaleString(undefined, {maximumFractionDigits: 0})}
  â€¢ Insurance (1 year): $${homeownersIns.toLocaleString(undefined, {maximumFractionDigits: 0})}
  â€¢ Property tax escrow: $${propertyTaxEscrow.toLocaleString(undefined, {maximumFractionDigits: 0})}

ðŸ” Inspections: $${inspection}

${concessions > 0 ? `\nðŸ’š Seller Concessions: -$${concessions.toLocaleString()}` : ''}
      `;

      let tips = `
ðŸ’¡ WAYS TO REDUCE COSTS:

âœ… Shop Multiple Lenders:
  â€¢ Compare loan estimates from 3+ lenders
  â€¢ Negotiate origination fees (save $500-2,000)
  â€¢ Ask for lender credits

âœ… Ask for Seller Concessions:
  â€¢ ${loanType === "conventional" && downPct >= 0.25 ? 'Up to 9% allowed' : 
       loanType === "conventional" && downPct >= 0.1 ? 'Up to 6% allowed' :
       loanType === "fha" ? 'Up to 6% allowed' :
       loanType === "va" ? 'Up to 4% allowed' : 'Up to 6% allowed'}
  â€¢ Increase offer, ask seller to cover closing costs
  â€¢ Could save $${Math.round(Math.min(totalClosingCosts, price * 0.06)).toLocaleString()}

âœ… Close at Month End:
  â€¢ Less prepaid interest
  â€¢ Could save $${Math.round(loanAmount * 0.07 / 12 * 0.5).toLocaleString()}

âœ… Shop Title Insurance:
  â€¢ Not all states allow, but check
  â€¢ Could save $200-500

${downPct < 0.2 ? '\nâš ï¸ Consider 20% Down:\n  â€¢ Eliminates PMI requirement\n  â€¢ Saves $' + Math.round(loanAmount * 0.01 / 12).toLocaleString() + '/month\n  â€¢ Better loan terms' : ''}

âœ… Use First-Time Buyer Programs:
  â€¢ State/local assistance programs
  â€¢ Grant programs for closing costs
  â€¢ Could cover $1,000-5,000+
      `;

      return [
        {
          label: "Total Closing Costs",
          value: totalClosingCosts.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Closing Costs Breakdown",
          value: breakdown,
          isCurrency: false,
        },
        {
          label: "Total Cash Needed at Closing",
          value: totalCashNeeded.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Closing Costs as % of Price",
          value: closingCostPercent.toFixed(2) + "%",
          isCurrency: false,
        },
        {
          label: "Cost Reduction Tips",
          value: tips,
          isCurrency: false,
        },
      ];
    },
  },
};

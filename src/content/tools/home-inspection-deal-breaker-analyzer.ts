import { CalculatorContent } from "@/types";

export const HOME_INSPECTION_DEAL_BREAKER_ANALYZER_CONTENT: CalculatorContent = {
  title: "Home Inspection Deal Breaker Analyzer | Should I Walk Away or Negotiate?",
  description:
    "Analyze home inspection findings to determine if issues are deal-breakers or negotiable. Calculate repair costs and decide whether to walk away, negotiate, or proceed with purchase.",
  icon: "Icon",
  category: "Calculators",
  slug: "home-inspection-deal-breaker-analyzer",
  article: {
    title: "Home Inspection Deal-Breaker Analyzer: Make Smart Decisions",
    content: `
# Home Inspection Deal-Breaker Analyzer

Receiving a home inspection report can be overwhelming. This tool helps you analyze inspection findings, categorize issues by severity, estimate repair costs, and decide whether to proceed, negotiate, or walk away from the deal.

## Understanding Inspection Findings

### Inspection Report Categories

**1. Safety Hazards** (Deal-Breakers)
- Structural failures
- Electrical hazards
- Gas leaks
- Mold/asbestos
- Foundation issues

**2. Major Systems** (Expensive, Negotiate Hard)
- HVAC replacement needed
- Roof replacement (< 3 years life)
- Plumbing system failures
- Electrical panel upgrades
- Water damage/rot

**3. Deferred Maintenance** (Negotiate)
- Old windows
- Dated fixtures
- Cosmetic issues
- Minor repairs
- Preventive items

**4. Nice-to-Fix** (Don't Bother Negotiating)
- Paint touch-ups
- Minor cosmetic items
- Upgrades vs repairs
- Personal preferences

## Deal-Breaker Issues

### Absolute Walk-Aways (Unless Price Drastically Reduced)

**1. Foundation Problems**
- Major cracks
- Settlement issues
- Bowing walls
- Cost: $10,000 - $100,000+
- **Action**: Almost always walk away

**2. Severe Structural Damage**
- Roof sag/failure
- Load-bearing wall issues
- Floor collapse risk
- Cost: $20,000 - $150,000+
- **Action**: Walk away or demand massive price reduction

**3. Active Mold Throughout**
- Black mold in multiple areas
- Hidden behind walls
- Health hazards
- Cost: $10,000 - $50,000+
- **Action**: Walk away unless professionally remediated first

**4. Electrical Fire Hazards**
- Aluminum wiring
- Federal Pacific panels
- Knob and tube wiring
- DIY wiring disasters
- Cost: $5,000 - $30,000
- **Action**: Must be fixed before closing

**5. Major Water Damage**
- Ongoing leaks
- Rotted framing
- Compromised structure
- Cost: $15,000 - $75,000+
- **Action**: Walk away or seller repairs first

**6. Termite/Pest Infestation**
- Active infestation
- Structural damage present
- Cost: $2,000 - $50,000+
- **Action**: Require treatment + repairs before closing

## Negotiate-Hard Issues

### Major System Failures

**1. HVAC System Dead/Dying**
- No heat or AC
- System 20+ years old
- Failed inspection test
- **Cost**: $5,000 - $15,000
- **Negotiation**: Full replacement credit or price reduction

**2. Roof Replacement Needed (< 3 Years)**
- Multiple leaks
- Missing shingles
- Underlying deck damage
- **Cost**: $8,000 - $25,000
- **Negotiation**: Full or partial credit based on remaining life

**3. Plumbing System Failures**
- Sewer line issues
- Polybutylene pipes
- Main line replacement
- **Cost**: $3,000 - $20,000
- **Negotiation**: Price reduction or seller repairs

**4. Electrical Panel Replacement**
- Undersized panel
- Safety issues
- Code violations
- **Cost**: $2,000 - $8,000
- **Negotiation**: Require repair before closing

**5. Water Heater Failed**
- Not working
- Leaking
- Very old (15+ years)
- **Cost**: $1,000 - $3,000
- **Negotiation**: Credit or replacement

## Standard Negotiation Items

### Worth Discussing but Not Deal-Breakers

**Windows** (Single-pane, drafty)
- Cost: $500 - $1,500 each
- Strategy: Credit for worst ones

**Gutters** (Missing, damaged)
- Cost: $1,000 - $3,000
- Strategy: Ask for repairs

**Deck/Patio** (Safety issues)
- Cost: $2,000 - $10,000
- Strategy: Credit or repair

**Appliances** (Not working)
- Cost: $500 - $3,000 each
- Strategy: Credit or replacement

**Minor Plumbing** (Leaks, fixtures)
- Cost: $500 - $3,000
- Strategy: Lump sum credit

## What NOT to Negotiate

### Skip These Items

âŒ Fresh paint needed
âŒ Cosmetic updates
âŒ Landscaping preferences
âŒ Light fixtures you don't like
âŒ Cabinet hardware
âŒ Personal taste items
âŒ "Nice to have" upgrades

**Why**: Seller will say no, wastes goodwill for important items

## Repair Cost Estimates

### Major Systems (National Averages)

**HVAC**:
- Furnace: $3,000 - $6,000
- AC unit: $3,500 - $7,000
- Full system: $6,000 - $15,000

**Roofing**:
- Asphalt shingles: $8,000 - $15,000
- Metal roof: $15,000 - $30,000
- Tile/slate: $20,000 - $50,000

**Foundation**:
- Minor cracks sealed: $500 - $2,000
- Structural repairs: $10,000 - $30,000
- Major foundation work: $30,000 - $100,000+

**Electrical**:
- Panel upgrade: $2,000 - $5,000
- Rewiring (partial): $3,000 - $10,000
- Full rewire: $8,000 - $20,000

**Plumbing**:
- Water heater: $1,000 - $3,000
- Sewer line: $3,000 - $15,000
- Repiping (partial): $2,000 - $10,000

**Water Damage**:
- Small area: $1,000 - $5,000
- Multiple rooms: $10,000 - $30,000
- Extensive: $30,000 - $75,000+

## Negotiation Strategies

### Strategy 1: Request Repairs
**Best for**: Items under $5,000, safety issues

"We request seller repair the following items before closing:
- GFCI outlets in bathrooms ($500)
- Downspout extensions ($200)
- Deck railing secured ($800)
Total: $1,500"

**Pros**: Fixed correctly, no cash outlay
**Cons**: Quality concerns, time delays

### Strategy 2: Request Credits
**Best for**: Large repairs you want to choose contractor

"We request $12,000 credit at closing for HVAC replacement"

**Pros**: You choose contractor, verify quality
**Cons**: Need cash, higher loan amount

### Strategy 3: Price Reduction
**Best for**: Multiple issues, simplicity

"We request $15,000 price reduction for roof, HVAC, and plumbing issues"

**Pros**: Clean, simple, lowers loan amount
**Cons**: Still your problem to fix

### Strategy 4: Walk Away
**Best for**: Too many issues, deal-breakers

"Based on inspection findings, we're exercising our inspection contingency and terminating the contract"

**Pros**: Protects you from bad investment
**Cons**: Start over, lost time/money

### Strategy 5: As-Is Acknowledgment
**Best for**: Getting better price for accepting issues

"We'll accept the home as-is if you reduce price by $25,000"

**Pros**: Clean transaction, clear pricing
**Cons**: All repairs your responsibility

## How to Present Your Request

### Professional Approach

**1. Categorize Issues**

Safety Hazards (Must Fix):
- Exposed wiring in garage ($800)
- GFCI outlets missing ($500)

Major Systems (Negotiate):
- HVAC not cooling ($6,000)
- Water heater 18 years old ($1,800)

Deferred Maintenance (Nice to Fix):
- Cracked driveway
- Worn carpet

**2. Get Contractor Quotes**
Support requests with real estimates:
- 3 quotes for major items
- Licensed contractors
- Detailed scope of work
- Realistic pricing

**3. Prioritize Your Asks**
Indicate flexibility:
- "Must-have repairs: $8,000"
- "Would like credit for: $4,000"
- "Willing to accept as-is if price reduced by: $15,000"

**4. Provide Options**
Make it easy for seller to say yes:
- "Option A: Seller repairs all items"
- "Option B: $10,000 credit at closing"
- "Option C: $12,000 price reduction"

## Red Flags in Seller Responses

### Warning Signs

âŒ **"Home sold as-is"** (after accepting your offer)
- They knew about problems
- Not willing to negotiate fairly
- Consider walking

âŒ **Won't provide receipts for claimed repairs**
- Might not have been done
- Poor quality work
- Trust issues

âŒ **Defensive or angry reactions**
- Unreasonable seller
- Future problems likely
- Difficult closing ahead

âŒ **Refuses all reasonable requests**
- Even safety items
- Even properly documented costs
- Walk away

## When to Walk Away

### Calculate Walk-Away Threshold

**Formula**:
Total repair costs + emotional stress + unknown issues > (Market value - Purchase price + Earnest money lost)

**Example**:
- Repairs needed: $35,000
- Purchase price: $400,000
- Market value: $420,000
- Earnest money: $5,000

**Analysis**:
- Equity if buy: $20,000
- Minus repairs: -$35,000
- Net position: -$15,000
- Plus stress of repairs: Priceless

**Decision**: WALK AWAY

### Absolute Walk-Away Situations

1. **Safety hazards seller won't address**
2. **Major structural issues**
3. **Repair costs > 10% of purchase price**
4. **Seller dishonesty discovered**
5. **Too many significant issues**
6. **Seller completely unreasonable**
7. **Your gut says no**

## Common Buyer Mistakes

### Mistake #1: Asking for Everything
**Problem**: Kills deal, looks petty

**Better**: Focus on significant items only ($500+ each)

### Mistake #2: Accepting Seller's Handyman
**Problem**: Poor quality, liability issues

**Better**: Insist on licensed contractors

### Mistake #3: Not Getting Quotes
**Problem**: Seller disputes costs

**Better**: 3 written quotes for each major item

### Mistake #4: Emotional Attachment
**Problem**: Accept bad deal due to falling in love

**Better**: Treat as business transaction

### Mistake #5: Ignoring Small Safety Issues
**Problem**: Can cause injury, future liability

**Better**: All safety items must be addressed

## Using This Analyzer

**Input inspection findings**:
1. List all significant issues
2. Categorize by severity
3. Estimate repair costs
4. Note safety concerns

**Get your analysis**:
1. **Deal-breaker rating** (0-100)
2. **Total estimated repairs**
3. **Negotiation strategy**
4. **Walk-away recommendation**
5. **Prioritized repair list**

## Sample Inspection Scenarios

### Scenario 1: Proceed with Confidence
**Findings**:
- Minor cosmetic issues ($2,000)
- Deferred maintenance ($3,000)
- No major systems affected

**Action**: Request $3,000 credit, proceed

### Scenario 2: Negotiate Hard
**Findings**:
- HVAC 22 years old ($8,000)
- Roof needs replacement ($12,000)
- Water heater leaking ($1,500)
- Total: $21,500

**Action**: Request $20,000 credit or price reduction

### Scenario 3: Walk Away
**Findings**:
- Foundation cracks ($25,000)
- Active mold ($15,000)
- Electrical hazards ($8,000)
- Plumbing failures ($12,000)
- Total: $60,000

**Action**: WALK AWAY - too many major issues

## Final Decision Framework

### Proceed If:
âœ… No safety hazards or seller addresses them
âœ… Major systems functional or seller provides credit
âœ… Total repairs < 5-7% of purchase price
âœ… Seller negotiates reasonably
âœ… Still good deal after repairs
âœ… You have cash reserves for unexpected

### Walk Away If:
âŒ Undisclosed major defects (dishonesty)
âŒ Multiple deal-breaker issues
âŒ Repairs > 10% of purchase price
âŒ Safety hazards seller won't fix
âŒ Gut feeling says no
âŒ Seller completely unreasonable
âŒ You can't afford repairs + purchase

**Remember**: There will always be another house. Don't let emotional attachment or sunk costs force you into a bad decision. A home inspection is your protectionâ€”use it wisely!
    `,
  },
  calculator: {
    fields: [
      {
        name: "purchasePrice",
        label: "Purchase Price ($)",
        type: "number",
        defaultValue: "400000",
      },
      {
        name: "structuralIssues",
        label: "Structural/Foundation Issues Cost ($)",
        type: "number",
        defaultValue: "0",
      },
      {
        name: "majorSystems",
        label: "Major Systems (HVAC, Roof, etc) Cost ($)",
        type: "number",
        defaultValue: "12000",
      },
      {
        name: "safetyHazards",
        label: "Safety Hazards Cost ($)",
        type: "number",
        defaultValue: "2000",
      },
      {
        name: "waterDamage",
        label: "Water Damage/Mold Cost ($)",
        type: "number",
        defaultValue: "0",
      },
      {
        name: "deferredMaintenance",
        label: "Deferred Maintenance Cost ($)",
        type: "number",
        defaultValue: "5000",
      },
      {
        name: "marketValue",
        label: "Estimated Market Value ($)",
        type: "number",
        defaultValue: "420000",
      },
      {
        name: "earnestMoney",
        label: "Earnest Money at Risk ($)",
        type: "number",
        defaultValue: "8000",
      },
    ],
    results: [
      {
        label: "Total Repair Costs",
        isCurrency: true,
      },
      {
        label: "Repairs as % of Purchase Price",
        isCurrency: false,
      },
      {
        label: "Deal-Breaker Score",
        isCurrency: false,
      },
      {
        label: "Net Equity After Repairs",
        isCurrency: true,
      },
      {
        label: "Recommendation",
        isCurrency: false,
      },
      {
        label: "Negotiation Strategy",
        isCurrency: false,
      },
    ],
    calculate: (values) => {
      const {
        purchasePrice,
        structuralIssues,
        majorSystems,
        safetyHazards,
        waterDamage,
        deferredMaintenance,
        marketValue,
        earnestMoney,
      } = values;

      const price = parseFloat(purchasePrice);
      const structural = parseFloat(structuralIssues);
      const systems = parseFloat(majorSystems);
      const safety = parseFloat(safetyHazards);
      const water = parseFloat(waterDamage);
      const maintenance = parseFloat(deferredMaintenance);
      const market = parseFloat(marketValue);
      const earnest = parseFloat(earnestMoney);

      const totalRepairs = structural + systems + safety + water + maintenance;
      const repairPercent = (totalRepairs / price) * 100;
      const netEquity = market - price - totalRepairs;

      // Calculate deal-breaker score (0-100, higher = worse)
      let dealBreakerScore = 0;
      
      // Structural issues heavily weighted
      if (structural > 0) {
        dealBreakerScore += Math.min(50, (structural / price) * 500);
      }
      
      // Water damage/mold heavily weighted
      if (water > 0) {
        dealBreakerScore += Math.min(30, (water / price) * 300);
      }
      
      // Safety hazards  moderately weighted
      if (safety > 0) {
        dealBreakerScore += Math.min(20, (safety / price) * 200);
      }
      
      // Major systems moderately weighted
      if (systems > 0) {
        dealBreakerScore += Math.min(15, (systems / price) * 100);
      }
      
      // Deferred maintenance lightly weighted
      if (maintenance > 0) {
        dealBreakerScore += Math.min(10, (maintenance / price) * 50);
      }

      let scoreDescription = "";
      if (dealBreakerScore >= 70) {
        scoreDescription = `${dealBreakerScore.toFixed(0)}/100 - âŒ CRITICAL - Walk away recommended`;
      } else if (dealBreakerScore >= 50) {
        scoreDescription = `${dealBreakerScore.toFixed(0)}/100 - âš ï¸ SEVERE - Serious concerns, negotiate hard or walk`;
      } else if (dealBreakerScore >= 30) {
        scoreDescription = `${dealBreakerScore.toFixed(0)}/100 - âš ï¸ MODERATE - Negotiate significant repairs/credits`;
      } else if (dealBreakerScore >= 15) {
        scoreDescription = `${dealBreakerScore.toFixed(0)}/100 - âš ï¸ MINOR - Negotiate but likely acceptable`;
      } else {
        scoreDescription = `${dealBreakerScore.toFixed(0)}/100 - âœ… LOW - Proceed with minor negotiations`;
      }

      let recommendation = "";
      
      if (structural > 20000) {
        recommendation = `âŒ WALK AWAY\n\nMajor structural issues ($${structural.toLocaleString()}) are severe.\n\nâ€¢ These are expensive and risky repairs\nâ€¢ Could indicate deeper problems\nâ€¢ Will impact future resale\nâ€¢ Hard to get accurate estimates\n\nðŸ’¡ Unless seller reduces price by $${(totalRepairs * 1.5).toLocaleString()}+ or repairs completely before closing, walk away.`;
      } else if (water > 15000 || dealBreakerScore >= 70) {
        recommendation = `âŒ WALK AWAY\n\nToo many serious issues (Score: ${dealBreakerScore.toFixed(0)}/100).\n\nâ€¢ Total repairs: $${totalRepairs.toLocaleString()}\nâ€¢ ${repairPercent.toFixed(1)}% of purchase price\nâ€¢ Net equity after repairs: $${netEquity.toLocaleString()}\nâ€¢ Risk of hidden issues too high\n\nðŸ’¡ Find a better property. This one has too many red flags.`;
      } else if (repairPercent > 12 || dealBreakerScore >= 50) {
        recommendation = `âš ï¸ NEGOTIATE HARD OR WALK\n\nSignificant issues requiring tough negotiation.\n\nâ€¢ Total repairs: $${totalRepairs.toLocaleString()} (${repairPercent.toFixed(1)}% of price)\nâ€¢ Request full credit or price reduction\nâ€¢ If seller refuses, seriously consider walking\nâ€¢ Have backup plans ready\n\nðŸ’¡ Only proceed if:\n- Seller provides $${totalRepairs.toLocaleString()}+ credit\n- Still a good deal after repairs\n- You have cash reserves for unknowns`;
      } else if (repairPercent > 5) {
        recommendation = `âš ï¸ NEGOTIATE SIGNIFICANT REPAIRS\n\nModerate issues worth addressing.\n\nâ€¢ Total repairs: $${totalRepairs.toLocaleString()} (${repairPercent.toFixed(1)}% of price)\nâ€¢ Net equity after repairs: $${netEquity.toLocaleString()}\nâ€¢ Negotiate ${Math.round(totalRepairs * 0.75).toLocaleString()} - $${totalRepairs.toLocaleString()} credit\n\nðŸ’¡ Prioritize:\n1. Safety hazards ($${safety.toLocaleString()}) - must fix\n2. Major systems ($${systems.toLocaleString()}) - negotiate hard\n3. Deferred maintenance ($${maintenance.toLocaleString()}) - optional`;
      } else {
        recommendation = `âœ… PROCEED WITH MINOR NEGOTIATIONS\n\nReasonable issues for a used home.\n\nâ€¢ Total repairs: $${totalRepairs.toLocaleString()} (${repairPercent.toFixed(1)}% of price)\nâ€¢ Net equity after repairs: $${netEquity.toLocaleString()}\nâ€¢ This is manageable\n\nðŸ’¡ Negotiate:\n- Focus on significant items ($1,000+ each)\n- Request $${Math.round(totalRepairs * 0.6).toLocaleString()} - $${Math.round(totalRepairs * 0.8).toLocaleString()} credit\n- Let go of cosmetic items\n- Proceed with purchase`;
      }

      let negotiationStrategy = `
ðŸŽ¯ NEGOTIATION STRATEGY:

Priority 1 - MUST ADDRESS (Non-negotiable):
${structural > 0 ? `â€¢ Structural issues: $${structural.toLocaleString()} - Seller repairs or credit` : ''}
${water > 0 ? `â€¢ Water damage/mold: $${water.toLocaleString()} - Seller repairs before closing` : ''}
${safety > 0 ? `â€¢ Safety hazards: $${safety.toLocaleString()} - Must be fixed before closing` : ''}
${structural === 0 && water === 0 && safety === 0 ? 'â€¢ None - no critical safety issues' : ''}

Priority 2 - NEGOTIATE HARD (Major items):
${systems > 0 ? `â€¢ Major systems: $${systems.toLocaleString()} - Request credit or price reduction` : 'â€¢ None'}

Priority 3 - NICE TO GET (If seller agrees):
${maintenance > 0 ? `â€¢ Deferred maintenance: $${maintenance.toLocaleString()} - Request $${Math.round(maintenance * 0.5).toLocaleString()} credit` : 'â€¢ None'}

ðŸ“‹ SUGGESTED APPROACH:
${dealBreakerScore >= 50 ? 
  `"Based on inspection, we request $${totalRepairs.toLocaleString()} price reduction or we'll need to walk away."` :
  repairPercent > 7 ?
  `"We request $${(systems + safety + structural + water).toLocaleString()} credit for Priority 1 & 2 items. We'll handle deferred maintenance."` :
  `"We request $${Math.round(totalRepairs * 0.7).toLocaleString()} credit for the significant items found during inspection."`
}
      `;

      return [
        {
          label: "Total Repair Costs",
          value: totalRepairs.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Repairs as % of Purchase Price",
          value: repairPercent.toFixed(2) + "%",
          isCurrency: false,
        },
        {
          label: "Deal-Breaker Score",
          value: scoreDescription,
          isCurrency: false,
        },
        {
          label: "Net Equity After Repairs",
          value: netEquity.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Recommendation",
          value: recommendation,
          isCurrency: false,
        },
        {
          label: "Negotiation Strategy",
          value: negotiationStrategy,
          isCurrency: false,
        },
      ];
    },
  },
};

import { CalculatorContent } from '@/types/calculator';

export const denverAduFeasibilityContent: CalculatorContent = {
  meta: {
    title: 'Denver ADU Feasibility Checker | Accessory Dwelling Unit Calculator',
    description: 'Check if your Denver property qualifies for an ADU (accessory dwelling unit). Analyze zoning, lot size, setbacks, parking requirements, and construction costs in Colorado.',
  },
  title: 'Denver (CO) ADU Feasibility Checker',
  description: 'Determine if your property qualifies for an accessory dwelling unit in Denver',
  icon: 'Home',
  category: 'State-Specific Tools',
  subcategory: 'Location Analysis',
  article: {
    title: 'Denver ADU Feasibility Guide: Building Accessory Dwelling Units in Colorado',
    content: `
# Denver ADU Feasibility Checker

## Overview

Denver, Colorado has implemented progressive ADU (Accessory Dwelling Unit) regulations to increase housing density and affordability. Understanding zoning requirements, lot coverage limits, and construction costs is essential for successful ADU development.

## What is an ADU?

An Accessory Dwelling Unit is a secondary housing unit on a single-family residential lot. ADUs can be:

### Types of ADUs
- **Detached ADU**: Separate structure in backyard or side yard
- **Attached ADU**: Addition to existing home with separate entrance
- **Internal ADU**: Converted basement, attic, or garage space
- **Above-Garage ADU**: Living space built above detached garage

## Denver ADU Regulations

### Zoning Requirements
- **Permitted Zones**: All single-unit and two-unit residential zones
- **Owner Occupancy**: No longer required (as of 2020 reform)
- **Size Limits**: ADU cannot exceed primary dwelling square footage
- **Height Limits**: 24 feet maximum for detached ADUs

### Lot Requirements
- **Minimum Lot Size**: No minimum (ADU allowed on any qualifying lot)
- **Lot Coverage**: Maximum 40-50% depending on zone
- **Setbacks**: 5 feet minimum from rear/side property lines
- **Alley Access**: Reduced setbacks if accessed from alley

### Parking Requirements
- **Primary Dwelling**: Must maintain required parking
- **ADU Parking**: One space required if ADU > 500 sq ft
- **Exception**: No ADU parking required if within 1/4 mile of transit
- **Waiver Available**: Can apply for parking waiver in many cases

## Design Standards

### Size Limitations
- **Maximum Size**: Cannot exceed primary dwelling size
- **Typical Range**: 400-1,200 square feet
- **Studio Units**: 300-500 sq ft common
- **Two-Bedroom**: 800-1,200 sq ft typical

### Architectural Requirements
- **Compatibility**: Should complement primary dwelling style
- **Materials**: Coordinate with main house materials
- **Entrance**: Separate entrance required
- **Windows**: Minimum natural light requirements apply

## Construction Costs

### Detached ADU
- **New Construction**: $200-$350 per square foot
- **600 sq ft Studio**: $120,000-$210,000
- **800 sq ft 1-Bedroom**: $160,000-$280,000
- **1,000 sq ft 2-Bedroom**: $200,000-$350,000

### Garage Conversion
- **Basic Conversion**: $80-$150 per square foot
- **400 sq ft Studio**: $32,000-$60,000
- **Includes**: Insulation, HVAC, bathroom, kitchenette

### Basement Conversion
- **Finishing Costs**: $70-$120 per square foot
- **600 sq ft Unit**: $42,000-$72,000
- **Egress Window**: $3,000-$8,000 (if required)

## Permit and Fee Structure

### Application Fees
- **Zoning Review**: $150-$300
- **Building Permit**: 0.6% of construction value (minimum $100)
- **Plan Review**: $500-$2,000 depending on complexity
- **Impact Fees**: Generally waived for ADUs under 750 sq ft

### Utility Connections
- **Sewer Tap**: $5,000-$15,000 (if new connection needed)
- **Water Meter**: $2,000-$5,000 (separate meter optional)
- **Electric Service**: $1,500-$5,000 (upgrade if needed)
- **Gas Connection**: $1,000-$3,000

## Financial Benefits

### Rental Income Potential
- **Studio ADU**: $1,000-$1,500/month
- **1-Bedroom ADU**: $1,400-$2,000/month
- **2-Bedroom ADU**: $1,800-$2,500/month
- **Short-Term Rental**: $100-$200/night (if permitted)

### Return on Investment
- **Payback Period**: 8-15 years typical
- **Property Value Increase**: 20-35% value addition
- **Rental Yield**: 5-8% annual return
- **Equity Growth**: Immediate equity upon completion

## Common Obstacles

### Lot Limitations
- **Narrow Lots**: May not meet side setback requirements
- **Steep Slopes**: Excavation and foundation costs increase
- **Easements**: Utility easements can limit buildable area
- **Tree Preservation**: Mature tree protection requirements

### HOA Restrictions
- **Covenants**: Some HOAs prohibit ADUs despite city allowance
- **Architectural Review**: HOA approval may be required
- **Rental Restrictions**: HOA may limit rental activity
- **Legal Review**: Check HOA documents before proceeding

### Neighbor Relations
- **Privacy Concerns**: Address window placement and fencing
- **Notification**: Denver requires neighbor notification
- **Design Review**: Consider neighborhood character
- **Construction Impact**: Minimize disruption during build

## Step-by-Step Process

### Phase 1: Feasibility (1-2 months)
1. **Site Assessment**: Measure lot, identify constraints
2. **Zoning Verification**: Confirm ADU is permitted
3. **Budget Planning**: Determine construction budget
4. **Design Consultation**: Meet with architect or designer

### Phase 2: Design (2-4 months)
1. **Schematic Design**: Develop initial floor plans
2. **Design Development**: Refine materials and systems
3. **Neighbor Meeting**: Present plans to neighbors (recommended)
4. **Construction Documents**: Final detailed drawings

### Phase 3: Permitting (1-3 months)
1. **Permit Submittal**: Submit plans to Denver Development Services
2. **Plan Review**: Address reviewer comments
3. **Permit Issuance**: Receive approved building permit
4. **HOA Approval**: If applicable, obtain HOA permission

### Phase 4: Construction (4-8 months)
1. **Site Preparation**: Demolition, grading, utilities
2. **Foundation**: Concrete work and rough-in
3. **Framing**: Structure and roof installation
4. **Finish Work**: Interior finishes and landscaping
5. **Final Inspection**: Certificate of occupancy

## Tax Implications

### Property Taxes
- **Assessment Increase**: Property value will increase
- **Tax Impact**: Expect 15-30% property tax increase
- **Rental Income**: Must report rental income to IRS
- **Depreciation**: Can depreciate ADU over 27.5 years

### Deductions
- **Mortgage Interest**: Deductible on construction loan
- **Property Tax**: Rental portion is deductible
- **Operating Expenses**: Maintenance, utilities, management
- **Depreciation**: Annual depreciation deduction

## ADU Financing Options

### Traditional Financing
- **Cash-Out Refinance**: Access home equity
- **Home Equity Line of Credit**: Borrow as needed
- **Construction Loan**: Short-term loan for building
- **Personal Loan**: Unsecured loan for smaller projects

### Specialized Programs
- **FHA 203(k)**: Renovation loan program
- **Fannie Mae HomeStyle**: Purchase + renovation financing
- **Local Programs**: Denver may offer ADU financing assistance
- **Green Loans**: Energy-efficient construction incentives

## Resources and Support

### Denver Resources
- **Denver Development Services**: Permit and zoning information
- **Denver ADU Handbook**: Free guide to ADU development
- **Pre-Application Meeting**: Free consultation with city staff
- **Online Portal**: Submit and track permits online

### Professional Services
- **ADU Architects**: Specialists in small dwelling design
- **ADU Builders**: Contractors experienced with ADUs
- **Expediting Services**: Permit assistance and processing
- **Financial Advisors**: ADU investment analysis

## How to Use This Tool

1. **Enter Lot Details**: Provide lot size and dimensions
2. **Select ADU Type**: Choose detached, attached, or conversion
3. **Specify Size**: Enter desired square footage
4. **Review Feasibility**: Check zoning and setback compliance
5. **Estimate Costs**: Calculate construction and permit fees
6. **Analyze Returns**: Evaluate rental income potential

This tool helps Denver property owners assess ADU feasibility and make informed decisions about accessory dwelling unit development.
    `,
    keywords: [
      'Denver ADU',
      'Colorado accessory dwelling unit',
      'Denver backyard cottage',
      'ADU feasibility',
      'Denver zoning',
      'ADU construction costs',
      'Denver carriage house',
      'accessory apartment Denver',
      'ADU permit Colorado',
      'Denver housing development',
    ],
  },
  variables: {
    lotSize: {
      label: 'Lot Size (square feet)',
      type: 'number',
      defaultValue: 6000,
      min: 1000,
      max: 50000,
      step: 100,
      helpText: 'Total lot size in square feet',
    },
    existingHouseSize: {
      label: 'Existing House Size (sq ft)',
      type: 'number',
      defaultValue: 1500,
      min: 500,
      max: 10000,
      step: 100,
      helpText: 'Square footage of primary dwelling',
    },
    aduType: {
      label: 'ADU Type',
      type: 'select',
      defaultValue: 'detached',
      options: [
        { value: 'detached', label: 'Detached (new structure)' },
        { value: 'attached', label: 'Attached (addition)' },
        { value: 'garage-conversion', label: 'Garage Conversion' },
        { value: 'basement-conversion', label: 'Basement Conversion' },
      ],
      helpText: 'Type of ADU you plan to build',
    },
    aduSize: {
      label: 'Proposed ADU Size (sq ft)',
      type: 'number',
      defaultValue: 600,
      min: 300,
      max: 2000,
      step: 50,
      helpText: 'Desired ADU square footage',
    },
    distanceToTransit: {
      label: 'Distance to Transit (miles)',
      type: 'number',
      defaultValue: 0.5,
      min: 0,
      max: 5,
      step: 0.1,
      helpText: 'Distance to nearest bus or rail stop',
    },
    constructionQuality: {
      label: 'Construction Quality',
      type: 'select',
      defaultValue: 'standard',
      options: [
        { value: 'basic', label: 'Basic ($150-200/sq ft)' },
        { value: 'standard', label: 'Standard ($200-280/sq ft)' },
        { value: 'premium', label: 'Premium ($280-350/sq ft)' },
      ],
      helpText: 'Expected quality level of construction',
    },
    intendToRent: {
      label: 'Intend to Rent ADU?',
      type: 'select',
      defaultValue: 'yes',
      options: [
        { value: 'yes', label: 'Yes (Long-term)' },
        { value: 'short-term', label: 'Yes (Short-term/Airbnb)' },
        { value: 'family', label: 'No (Family/Personal Use)' },
      ],
      helpText: 'How do you plan to use the ADU?',
    },
  },
  calculate: (inputs) => {
    const lotSize = inputs.lotSize || 6000;
    const existingHouseSize = inputs.existingHouseSize || 1500;
    const aduSize = inputs.aduSize || 600;
    const aduType = inputs.aduType || 'detached';
    const distanceToTransit = inputs.distanceToTransit || 0.5;
    const constructionQuality = inputs.constructionQuality || 'standard';
    const intendToRent = inputs.intendToRent || 'yes';

    // Cost per square foot based on type and quality
    let costPerSqFt = 250; // default standard detached
    
    if (aduType === 'detached') {
      if (constructionQuality === 'basic') costPerSqFt = 175;
      if (constructionQuality === 'standard') costPerSqFt = 250;
      if (constructionQuality === 'premium') costPerSqFt = 315;
    } else if (aduType === 'attached') {
      if (constructionQuality === 'basic') costPerSqFt = 150;
      if (constructionQuality === 'standard') costPerSqFt = 220;
      if (constructionQuality === 'premium') costPerSqFt = 290;
    } else if (aduType === 'garage-conversion') {
      if (constructionQuality === 'basic') costPerSqFt = 80;
      if (constructionQuality === 'standard') costPerSqFt = 115;
      if (constructionQuality === 'premium') costPerSqFt = 150;
    } else if (aduType === 'basement-conversion') {
      if (constructionQuality === 'basic') costPerSqFt = 70;
      if (constructionQuality === 'standard') costPerSqFt = 95;
      if (constructionQuality === 'premium') costPerSqFt = 120;
    }

    // Construction cost
    const constructionCost = aduSize * costPerSqFt;

    // Permits and fees
    const buildingPermitFee = Math.max(100, constructionCost * 0.006);
    const planReviewFee = aduSize < 600 ? 500 : 1200;
    const impactFees = aduSize < 750 ? 0 : 2500;
    const totalPermitFees = buildingPermitFee + planReviewFee + impactFees + 250; // +250 for zoning

    // Utility connections (for detached/attached)
    let utilityConnections = 0;
    if (aduType === 'detached' || aduType === 'attached') {
      utilityConnections = 10000; // average for sewer, water, electric
    }

    // Total project cost
    const totalCost = constructionCost + totalPermitFees + utilityConnections;

    // Rental income estimate
    let monthlyRent = 0;
    if (intendToRent === 'yes') {
      if (aduSize < 500) monthlyRent = 1200;
      else if (aduSize < 700) monthlyRent = 1600;
      else if (aduSize < 900) monthlyRent = 1900;
      else monthlyRent = 2200;
    } else if (intendToRent === 'short-term') {
      // Short-term typically 2x higher but 60% occupancy
      if (aduSize < 500) monthlyRent = 1200 * 1.2;
      else if (aduSize < 700) monthlyRent = 1600 * 1.2;
      else if (aduSize < 900) monthlyRent = 1900 * 1.2;
      else monthlyRent = 2200 * 1.2;
    }

    const annualRentalIncome = monthlyRent * 12;

    // ROI calculation
    const yearsToPayback = annualRentalIncome > 0 ? totalCost / annualRentalIncome : 0;

    // Feasibility checks
    const issues: string[] = [];
    let feasibilityStatus = 'Feasible';

    // Check if ADU exceeds primary dwelling size
    if (aduSize > existingHouseSize) {
      feasibilityStatus = 'Not Feasible';
      issues.push(`ADU size (${aduSize} sq ft) exceeds primary dwelling (${existingHouseSize} sq ft)`);
    }

    // Check lot coverage (rough estimate - 40% max)
    const totalBuilding = existingHouseSize + aduSize;
    const lotCoverage = (totalBuilding / lotSize) * 100;
    if (lotCoverage > 45) {
      feasibilityStatus = 'Review Required';
      issues.push(`Total lot coverage (${lotCoverage.toFixed(1)}%) may exceed 40-45% limit`);
    }

    // Parking requirement
    let parkingRequired = 'No';
    if (aduSize > 500 && distanceToTransit > 0.25) {
      parkingRequired = 'Yes (1 space)';
      issues.push('One parking space required for ADU over 500 sq ft (waiver may be available)');
    }

    // Build feasibility message
    let feasibilityMessage = '';
    if (feasibilityStatus === 'Feasible') {
      feasibilityMessage = '✓ Your ADU project appears feasible under Denver regulations';
    } else if (feasibilityStatus === 'Review Required') {
      feasibilityMessage = '⚠ Your project may require special review or design modifications';
    } else {
      feasibilityMessage = '✗ Your project does not meet Denver ADU requirements';
    }

    return {
      results: {
        feasibilityStatus: {
          label: 'Feasibility Status',
          value: feasibilityStatus,
          type: 'text' as const,
        },
        feasibilityMessage: {
          label: 'Feasibility Assessment',
          value: feasibilityMessage,
          type: 'text' as const,
        },
        constructionCost: {
          label: 'Estimated Construction Cost',
          value: constructionCost,
          type: 'currency' as const,
        },
        permitFees: {
          label: 'Permits and Fees',
          value: totalPermitFees,
          type: 'currency' as const,
        },
        utilityConnections: {
          label: 'Utility Connection Costs',
          value: utilityConnections,
          type: 'currency' as const,
        },
        totalCost: {
          label: 'Total Project Cost',
          value: totalCost,
          type: 'currency' as const,
        },
        monthlyRent: {
          label: 'Estimated Monthly Rent',
          value: monthlyRent,
          type: 'currency' as const,
        },
        annualRentalIncome: {
          label: 'Annual Rental Income',
          value: annualRentalIncome,
          type: 'currency' as const,
        },
        yearsToPayback: {
          label: 'Years to Payback',
          value: yearsToPayback,
          type: 'number' as const,
          precision: 1,
        },
        lotCoverage: {
          label: 'Total Lot Coverage',
          value: lotCoverage,
          type: 'percentage' as const,
        },
        parkingRequired: {
          label: 'ADU Parking Required',
          value: parkingRequired,
          type: 'text' as const,
        },
        issues: {
          label: 'Potential Issues',
          value: issues.length > 0 ? issues.join('; ') : 'None identified',
          type: 'text' as const,
        },
      },
    };
  },
};

import { CalculatorContent } from '@/types';

export const VendorContractorInsuranceTrackerContent: CalculatorContent = {
  title: 'Vendor/Contractor Insurance Tracker - Free Template 2025',
  description: 'Track vendor and contractor insurance certificates, expiration dates, and coverage requirements. Ensure liability protection compliance',
  icon: 'üõ°Ô∏è',
  category: 'Property Management & Compliance',
  slug: 'vendor-contractor-insurance-tracker',
  metaTitle: 'Vendor Insurance Tracker - Free Contractor Compliance Tool',
  metaDescription: 'Track contractor insurance certificates and expiration dates. Monitor general liability, workers comp, and additional insured status. Free property management tool.',
  
  article: {
    title: 'Vendor/Contractor Insurance Tracker: Complete Compliance Guide',
    content: `
      <h2>Understanding Vendor Insurance Requirements</h2>
      <p>Property owners and managers face significant liability exposure when contractors, vendors, and service providers work on their properties. A single uninsured contractor injury or property damage incident can result in devastating lawsuits, insurance claims, and financial losses. Properly tracking vendor insurance certificates is not just a best practice‚Äîit's essential risk management that protects your business, tenants, and investment.</p>

      <p>The vendor insurance tracking process involves verifying that all contractors carry adequate insurance coverage, ensuring you're named as an additional insured, monitoring expiration dates, and maintaining organized documentation. Many property owners learn about insurance gaps only after an incident occurs, by which time it's too late to prevent liability exposure. Our tracking system helps you stay ahead of expirations and maintain continuous protection.</p>

      <h3>Why Vendor Insurance Tracking Matters</h3>
      <p>The importance of systematic insurance tracking becomes clear when you understand the liability landscape:</p>

      <h4>Property Owner Liability Exposure</h4>
      <p><strong>Vicarious Liability:</strong> Property owners can be held liable for injuries or damages caused by contractors working on their property, even when the contractor is an independent business. Courts sometimes pierce the independent contractor shield, particularly when owners exercise significant control over the work or fail to ensure proper licensing and insurance.</p>

      <p><strong>Negligent Hiring Claims:</strong> If you hire an uninsured or underinsured contractor who causes injury or damage, injured parties may sue you for negligent hiring. This claim alleges you should have verified the contractor's qualifications and insurance before allowing them to work.</p>

      <p><strong>Premises Liability:</strong> As a property owner, you maintain baseline liability for hazardous conditions on your property. When contractors create hazards (scaffolding, open trenches, electrical work), your liability exposure increases significantly without proper insurance protections.</p>

      <h4>Financial Consequences of Insurance Gaps</h4>
      <p><strong>Direct Lawsuit Liability:</strong> Without adequate contractor insurance, you may face direct liability for injuries, property damage, or other losses. A single serious injury can result in settlements or judgments exceeding $1 million.</p>

      <p><strong>Your Insurance Rates Increase:</strong> Even when your insurance covers a claim caused by an uninsured contractor, filing claims drives up your premiums. Repeated claims can make insurance prohibitively expensive or unavailable.</p>

      <p><strong>Tenant Litigation:</strong> Tenants injured by contractors or suffering property damage from contractor work may sue both the contractor and you as the property owner. Without contractor insurance to cover defense and damages, you bear the full burden.</p>

      <p><strong>Lender and Investor Requirements:</strong> Commercial lenders and investment partners typically require proof that all contractors carry adequate insurance. Failure to maintain this documentation can trigger loan defaults or partnership disputes.</p>

      <h3>Required Insurance Coverage Types</h3>
      <p>Different vendors and contractors require different insurance coverage based on the work they perform:</p>

      <h4>General Liability Insurance</h4>
      <p><strong>Coverage Purpose:</strong> General liability (GL) insurance protects against claims of bodily injury, property damage, personal injury, and advertising injury caused by business operations. This is the foundation coverage all contractors should carry.</p>

      <p><strong>Minimum Coverage Amounts:</strong></p>
      <ul>
        <li><strong>Per Occurrence Limit:</strong> $1,000,000 minimum (covers individual incidents)</li>
        <li><strong>General Aggregate Limit:</strong> $2,000,000 minimum (total annual coverage)</li>
        <li><strong>Products/Completed Operations:</strong> $2,000,000 (covers work after completion)</li>
      </ul>

      <p><strong>When to Require Higher Limits:</strong> Large-scale projects, high-risk work (roofing, electrical, structural), valuable properties, or high-traffic commercial properties may warrant $2M/$4M or higher coverage levels.</p>

      <p><strong>What GL Doesn't Cover:</strong> General liability does not cover professional errors, pollution, auto accidents, or employee injuries (separate policies required for these risks).</p>

      <h4>Workers' Compensation Insurance</h4>
      <p><strong>Coverage Purpose:</strong> Workers' compensation provides benefits to employees injured on the job, covering medical expenses, lost wages, rehabilitation, and death benefits. Most states require businesses with employees to carry workers' comp insurance.</p>

      <p><strong>Statutory Requirements:</strong> Required coverage levels vary by state but typically follow state workers' compensation laws. The policy should meet your state's statutory requirements at minimum.</p>

      <p><strong>Why Property Owners Care:</strong> If a contractor's employee is injured on your property and the contractor lacks workers' comp insurance, the injured employee may sue you as the property owner. Workers' comp insurance protects you from these lawsuits.</p>

      <p><strong>Independent Contractor Exemptions:</strong> Some states allow sole proprietors or small businesses to waive workers' comp coverage. However, requiring coverage anyway protects you from disputes about whether workers are employees or contractors.</p>

      <h4>Commercial Auto Insurance</h4>
      <p><strong>Coverage Purpose:</strong> Commercial auto insurance covers vehicles used for business purposes, including liability for injuries and property damage caused by vehicle accidents, as well as physical damage to the vehicles.</p>

      <p><strong>Minimum Coverage:</strong></p>
      <ul>
        <li><strong>Bodily Injury:</strong> $1,000,000 combined single limit or $500,000 per person/$1,000,000 per accident</li>
        <li><strong>Property Damage:</strong> $500,000 minimum (often included in combined single limit)</li>
      </ul>

      <p><strong>When Required:</strong> Any contractor who drives to your property for work should carry commercial auto insurance. This includes plumbers, electricians, landscapers, delivery services, and any vendor using vehicles for business.</p>

      <p><strong>Hired and Non-Owned Coverage:</strong> This endorsement covers vehicles the contractor doesn't own but uses for business (rentals, employee personal vehicles). Ensure contractors carry this additional protection.</p>

      <h4>Professional Liability Insurance (Errors & Omissions)</h4>
      <p><strong>Coverage Purpose:</strong> Professional liability insurance protects against claims of negligent advice, errors, or omissions in professional services. Unlike general liability (which covers bodily injury/property damage), this covers financial losses from professional mistakes.</p>

      <p><strong>When to Require:</strong></p>
      <ul>
        <li>Architects and engineers designing building improvements</li>
        <li>Property inspectors evaluating conditions</li>
        <li>Environmental consultants assessing contamination</li>
        <li>Property managers handling tenant relations</li>
        <li>Real estate appraisers valuing properties</li>
        <li>Consultants providing expert advice</li>
      </ul>

      <p><strong>Minimum Coverage:</strong> $1,000,000 per claim and $2,000,000 aggregate for most professional services. Complex projects or high-value properties may require higher limits.</p>

      <h4>Umbrella/Excess Liability Insurance</h4>
      <p><strong>Coverage Purpose:</strong> Umbrella policies provide additional liability coverage above primary policies (general liability, auto, employers liability). They kick in when underlying policy limits are exhausted.</p>

      <p><strong>When to Require:</strong> High-risk projects, high-value properties, large-scale work, or projects in litigious jurisdictions benefit from umbrella coverage. Consider requiring $2-5 million umbrella policies for major contractors.</p>

      <p><strong>Coordination with Primary Coverage:</strong> Umbrella policies typically require minimum underlying coverage amounts. Ensure the contractor's primary policies meet umbrella policy requirements.</p>

      <h4>Pollution Liability Insurance</h4>
      <p><strong>Coverage Purpose:</strong> Pollution liability covers contamination, environmental damage, and cleanup costs from pollutants. Standard general liability policies exclude pollution coverage.</p>

      <p><strong>When to Require:</strong></p>
      <ul>
        <li>Environmental remediation contractors</li>
        <li>Asbestos/lead abatement specialists</li>
        <li>Underground storage tank work</li>
        <li>Mold remediation services</li>
        <li>Hazardous material handling</li>
        <li>Painting contractors (certain chemicals)</li>
      </ul>

      <p><strong>Minimum Coverage:</strong> $1,000,000 minimum, with higher limits for extensive remediation projects or properties with known contamination issues.</p>

      <h3>Additional Insured Requirements</h3>
      <p>Being named as an additional insured on contractor policies is critical but often misunderstood:</p>

      <h4>What Additional Insured Status Provides</h4>
      <p><strong>Coverage Extension:</strong> Additional insured status extends the contractor's insurance coverage to you for claims arising from the contractor's work. If someone is injured by the contractor's work and sues both you and the contractor, the contractor's insurance defends and indemnifies you.</p>

      <p><strong>Primary Coverage:</strong> When properly structured, the contractor's insurance responds as primary coverage for their work, meaning your insurance doesn't pay unless the contractor's coverage is exhausted. This protects your policy limits and prevents rate increases.</p>

      <p><strong>Defense Costs:</strong> Additional insured status typically includes defense costs, meaning the contractor's insurer pays attorney fees, court costs, and legal expenses for defending you in covered lawsuits.</p>

      <h4>Proper Additional Insured Endorsements</h4>
      <p>Not all additional insured endorsements provide equal protection:</p>

      <p><strong>Primary and Non-Contributory Language:</strong> Ensure endorsements specify the contractor's coverage is "primary and non-contributory" to yours. This prevents both insurers from arguing about who pays first, establishing clear priority.</p>

      <p><strong>Blanket vs. Specific:</strong> Blanket additional insured endorsements automatically cover anyone you're required to name by written contract. Specific endorsements name you explicitly. Both work, but verify you're actually included.</p>

      <p><strong>Ongoing Operations vs. Completed Operations:</strong> Some endorsements cover only ongoing work, terminating when the project completes. Products/completed operations coverage extends protection after project completion, covering latent defects discovered later. Require both.</p>

      <h4>Waiver of Subrogation</h4>
      <p><strong>What Subrogation Means:</strong> Subrogation allows an insurance company that pays a claim to pursue recovery from responsible third parties. If a contractor's negligence causes a fire but your insurance pays for the damage, your insurer might sue the contractor to recover what it paid.</p>

      <p><strong>Why Waive It:</strong> Waivers of subrogation prevent contractors' insurers from suing you if they pay claims related to your property. This creates mutual protection, preventing insurance companies from creating disputes between you and your contractors after incidents.</p>

      <p><strong>Requirement in Contracts:</strong> Include mutual waiver of subrogation provisions in all vendor contracts, requiring contractors to obtain these endorsements and agreeing to obtain them yourself.</p>

      <h3>Certificate of Insurance (COI) Requirements</h3>
      <p>Certificates of Insurance are documents insurance agents issue summarizing a contractor's coverage:</p>

      <h4>Essential COI Components</h4>
      <p><strong>Certificate Holder:</strong> You (the property owner or manager) should be listed as the certificate holder. This indicates the certificate was issued for your benefit and review.</p>

      <p><strong>Additional Insured Status:</strong> The certificate should indicate you're named as an additional insured. Look for checkboxes marked or "Additional Insured" language in the description section.</p>

      <p><strong>Coverage Details:</strong> The certificate must list all required policies (general liability, workers' comp, auto) with policy numbers, effective dates, expiration dates, and coverage limits.</p>

      <p><strong>Insurance Company Information:</strong> Verify the insurance companies listed are financially stable (A.M. Best rating A- or better preferred) and authorized to do business in your state.</p>

      <p><strong>Description of Operations:</strong> The description should reference your project/property and include language about primary/non-contributory coverage and waiver of subrogation.</p>

      <h4>Common COI Red Flags</h4>
      <p><strong>Expired or Expiring Coverage:</strong> Check all expiration dates carefully. Many contractors submit certificates with expired coverage or policies expiring during your project.</p>

      <p><strong>Insufficient Coverage Limits:</strong> Verify limits meet your requirements. Some contractors list minimum statutory coverage rather than the commercial coverage you require.</p>

      <p><strong>Missing Additional Insured Language:</strong> Generic certificates often lack additional insured confirmation. Follow up to verify additional insured endorsements are actually in place.</p>

      <p><strong>Mismatch with Contract Requirements:</strong> Compare the certificate against your contract's insurance requirements. Contractors sometimes submit certificates showing different coverage than the contract requires.</p>

      <p><strong>Non-Admitted Carriers:</strong> Non-admitted or surplus lines carriers may not provide the same protections as admitted carriers. Verify carriers are admitted in your state unless there's a specific reason to accept surplus lines coverage.</p>

      <h3>Creating an Insurance Tracking System</h3>
      <p>Effective insurance tracking requires organized systems and processes:</p>

      <h4>Initial Verification Process</h4>
      <p><strong>Pre-Contract Requirements:</strong> Require proof of insurance before signing contracts or allowing any work to begin. Make insurance certificates a prerequisite for contract execution.</p>

      <p><strong>Certificate Review Checklist:</strong> Create a standardized checklist verifying all required elements are present and correct. Don't assume certificates are accurate without careful review.</p>

      <p><strong>Direct Insurer Verification:</strong> For major projects or high-risk work, call the insurance company directly to verify coverage is in force, limits are accurate, and endorsements are attached. Fraudulent certificates are surprisingly common.</p>

      <p><strong>Document Retention:</strong> Store all certificates in organized files (physical or digital) with the contractor's contract, correspondence, and project records. You may need these years later if claims arise.</p>

      <h4>Ongoing Monitoring</h4>
      <p><strong>Expiration Date Tracking:</strong> Maintain a calendar or spreadsheet tracking all policy expiration dates. Set reminders to request updated certificates 30-45 days before expiration.</p>

      <p><strong>Renewal Requirements:</strong> Require contractors to submit updated certificates immediately upon policy renewal. Include this requirement in your contracts with penalties for non-compliance.</p>

      <p><strong>Mid-Project Changes:</strong> If contractors cancel or change policies mid-project, they should notify you immediately and provide updated certificates. Contract provisions should prohibit coverage changes without your consent.</p>

      <p><strong>Quarterly Reviews:</strong> Conduct quarterly reviews of all active vendor insurance files, verifying coverage remains current and updating your tracking system.</p>

      <h4>Technology Solutions</h4>
      <p><strong>Certificate Tracking Software:</strong> Specialized software automates certificate collection, verifies compliance with your requirements, tracks expirations, and sends automated renewal requests to contractors.</p>

      <p><strong>Cloud Storage:</strong> Cloud-based storage systems allow multiple team members to access certificates, reduce paper storage requirements, and provide searchable databases of all vendor insurance.</p>

      <p><strong>Integrated Property Management:</strong> Some property management platforms include vendor insurance tracking modules that integrate with your contractor management, work order, and accounting systems.</p>

      <h3>Contract Insurance Provisions</h3>
      <p>Strong contract language is essential for enforcing insurance requirements:</p>

      <h4>Essential Contract Clauses</h4>
      <p><strong>Minimum Insurance Requirements:</strong> Specify exact coverage types, minimum limits, and required endorsements (additional insured, waiver of subrogation, primary and non-contributory).</p>

      <p><strong>Certificate Submission Timeline:</strong> Require certificates before work begins and updated certificates at least 30 days before expiration. Specify the format and delivery method.</p>

      <p><strong>No Work Without Insurance:</strong> Explicitly state that contractors cannot begin or continue work without maintaining required insurance. This gives you clear grounds to stop work if coverage lapses.</p>

      <p><strong>Right to Verify Coverage:</strong> Reserve the right to contact insurance companies directly to verify coverage. Include contractor consent to insurers disclosing policy information to you.</p>

      <p><strong>Right to Obtain Coverage:</strong> If contractors let coverage lapse, reserve the right to obtain coverage yourself and backcharge the contractor for premiums paid.</p>

      <p><strong>Indemnification:</strong> Include indemnification provisions requiring contractors to defend, indemnify, and hold you harmless from claims arising from their work. Insurance helps contractors fulfill these obligations.</p>

      <h4>Enforcement and Consequences</h4>
      <p><strong>Stop Work Authority:</strong> Contract provisions should allow you to stop work immediately if insurance lapses or the contractor fails to provide updated certificates when required.</p>

      <p><strong>Monetary Penalties:</strong> Consider daily penalties for late certificate submissions or coverage lapses to incentivize compliance.</p>

      <p><strong>Termination Rights:</strong> Reserve the right to terminate contracts for insurance non-compliance. The threat of termination often motivates contractors to maintain coverage.</p>

      <p><strong>Payment Withholding:</strong> Some contracts allow withholding payment until proof of insurance is provided. Consult with an attorney about the enforceability in your jurisdiction.</p>

      <h3>Special Vendor Categories</h3>
      <p>Different vendor types present unique insurance considerations:</p>

      <h4>Property Management Companies</h4>
      <p>Property managers require comprehensive coverage including general liability ($2M+), professional liability/E&O ($1M+), fidelity bonds covering employee theft, and cyber liability protecting client data. Verify they carry adequate limits given the value of properties managed.</p>

      <h4>Service Contractors (Landscaping, Cleaning, HVAC)</h4>
      <p>Regular service contractors need general liability and workers' comp at minimum. Those using vehicles require commercial auto insurance. Consider requiring higher limits from contractors with frequent property access.</p>

      <h4>Construction Contractors</h4>
      <p>Construction projects demand robust coverage including general liability ($2M+), workers' comp, builder's risk (for new construction), and often professional liability for design-build projects. Require umbrella coverage for projects over $500,000.</p>

      <h4>Material Suppliers and Delivery Services</h4>
      <p>Suppliers delivering materials need commercial auto insurance and general liability. Verify coverage extends to loading/unloading operations, as some policies exclude these activities.</p>

      <h4>Technology and Security Vendors</h4>
      <p>IT contractors, security system installers, and smart home technology providers should carry professional liability/E&O coverage in addition to general liability. Cyber liability is increasingly important for vendors accessing your networks or tenant data.</p>

      <h3>State-Specific Requirements</h3>
      <p>Insurance requirements vary significantly by state:</p>

      <h4>Workers' Compensation Variations</h4>
      <p>States have different requirements for when workers' comp is mandatory, exemptions for sole proprietors, and coverage verification methods. Some states maintain databases for verifying coverage; others rely on certificates.</p>

      <h4>Licensing and Insurance Connections</h4>
      <p>Many states require contractors to maintain insurance as a condition of licensure. Verify contractor licenses are current, as lapsed licenses often indicate lapsed insurance.</p>

      <h4>Additional Insured Restrictions</h4>
      <p>Some states limit additional insured coverage or prohibit certain endorsement types. Ensure your requirements comply with local insurance regulations.</p>

      <h3>Frequently Asked Questions</h3>
      <p><strong>Can I accept a certificate showing coverage below my contract requirements?</strong><br>No. Accepting insufficient coverage exposes you to liability gaps. Require contractors to increase coverage to meet contract requirements before work begins, or adjust your requirements if they're unreasonable for the work involved.</p>

      <p><strong>How often should I request updated insurance certificates?</strong><br>Request updated certificates immediately upon policy renewal (before old coverage expires) and any time the contractor makes policy changes. For long-term relationships, request annual updates even if policies haven't expired.</p>

      <p><strong>What if a contractor's insurance expires mid-project?</strong><br>Stop work immediately and prohibit the contractor from resuming until they provide proof of renewed coverage. Your contract should explicitly permit this work stoppage without penalty to you.</p>

      <p><strong>Are certificates of insurance proof that coverage exists?</strong><br>Certificates indicate coverage exists on the date issued but aren't policies themselves. Contractors or agents could issue fraudulent certificates, or policies could be cancelled after issuance. For major projects, verify coverage directly with the insurance company.</p>

      <p><strong>Should I keep copies of expired insurance certificates?</strong><br>Yes. Maintain historical certificates indefinitely. Claims can arise years after work is completed, and you may need to prove coverage existed at the time of the work.</p>

      <p><strong>What's the difference between "additional insured" and "certificate holder"?</strong><br>Certificate holders receive copies of certificates for informational purposes but have no coverage under the policy. Additional insureds are actually covered by the policy for specified claims. Always require additional insured status, not just certificate holder status.</p>

      <h3>Conclusion</h3>
      <p>Systematic vendor and contractor insurance tracking is non-negotiable risk management for property owners and managers. The time invested in establishing tracking systems, reviewing certificates, and monitoring expirations pales in comparison to the financial and legal consequences of insurance gaps.</p>

      <p>Implement our tracking system to organize your vendor insurance documentation, automate expiration monitoring, and ensure continuous compliance with your insurance requirements. Combined with strong contract provisions and consistent enforcement, proper insurance tracking protects your business, tenants, and investment from potentially catastrophic liability exposure.</p>

      <p>When in doubt about coverage adequacy or certificate interpretation, consult with an insurance professional or attorney. The cost of expert guidance is minimal compared to the potential cost of inadequate protection.</p>
    `,
  },

  calculator: {
    fields: [
      {
        name: 'vendorName',
        label: 'Vendor/Contractor Name',
        type: 'text',
        defaultValue: '',
        placeholder: 'Enter vendor or contractor business name',
      },
      {
        name: 'serviceType',
        label: 'Service Type',
        type: 'select',
        defaultValue: 'general',
        options: [
          { value: 'general', label: 'General Contractor' },
          { value: 'plumbing', label: 'Plumbing' },
          { value: 'electrical', label: 'Electrical' },
          { value: 'hvac', label: 'HVAC' },
          { value: 'landscaping', label: 'Landscaping' },
          { value: 'cleaning', label: 'Cleaning/Janitorial' },
          { value: 'roofing', label: 'Roofing' },
          { value: 'painting', label: 'Painting' },
          { value: 'property-management', label: 'Property Management' },
          { value: 'other', label: 'Other' },
        ],
      },
      {
        name: 'glCoverage',
        label: 'General Liability Coverage Amount',
        type: 'number',
        defaultValue: 1000000,
        placeholder: 'Enter coverage amount',
      },
      {
        name: 'glExpiration',
        label: 'GL Policy Expiration Date',
        type: 'text',
        defaultValue: '',
        placeholder: 'MM/DD/YYYY',
      },
      {
        name: 'workersCompRequired',
        label: "Workers' Compensation",
        type: 'select',
        defaultValue: 'yes',
        options: [
          { value: 'yes', label: 'Yes - Coverage Verified' },
          { value: 'no', label: 'No - Exempt/Not Required' },
          { value: 'pending', label: 'Pending Verification' },
        ],
      },
      {
        name: 'wcExpiration',
        label: "Workers' Comp Expiration Date",
        type: 'text',
        defaultValue: '',
        placeholder: 'MM/DD/YYYY (if applicable)',
      },
      {
        name: 'autoInsurance',
        label: 'Commercial Auto Insurance',
        type: 'select',
        defaultValue: 'yes',
        options: [
          { value: 'yes', label: 'Yes - Coverage Verified' },
          { value: 'no', label: 'No - Not Required for This Vendor' },
          { value: 'pending', label: 'Pending Verification' },
        ],
      },
      {
        name: 'autoExpiration',
        label: 'Auto Insurance Expiration Date',
        type: 'text',
        defaultValue: '',
        placeholder: 'MM/DD/YYYY (if applicable)',
      },
      {
        name: 'additionalInsured',
        label: 'Additional Insured Status',
        type: 'select',
        defaultValue: 'yes',
        options: [
          { value: 'yes', label: 'Yes - Verified on Certificate' },
          { value: 'no', label: 'No - Not Listed' },
          { value: 'pending', label: 'Pending Endorsement' },
        ],
      },
    ],
    results: [
      { 
        label: 'Insurance Tracking Report', 
        isCurrency: false 
      },
      { 
        label: 'Compliance Status', 
        isCurrency: false 
      },
    ],
    calculate: (values) => {
      const { 
        vendorName,
        serviceType,
        glCoverage,
        glExpiration,
        workersCompRequired,
        wcExpiration,
        autoInsurance,
        autoExpiration,
        additionalInsured
      } = values;

      const serviceLabels: Record<string, string> = {
        'general': 'General Contractor',
        'plumbing': 'Plumbing Services',
        'electrical': 'Electrical Services',
        'hvac': 'HVAC Services',
        'landscaping': 'Landscaping Services',
        'cleaning': 'Cleaning/Janitorial Services',
        'roofing': 'Roofing Services',
        'painting': 'Painting Services',
        'property-management': 'Property Management',
        'other': 'Other Services',
      };

      const formatCoverage = (amount: number) => {
        return Number(amount || 0).toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0 });
      };

      const calculateDaysUntilExpiration = (expirationDate: string) => {
        if (!expirationDate) return null;
        const expDate = new Date(expirationDate);
        const today = new Date();
        const diffTime = expDate.getTime() - today.getTime();
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        return diffDays;
      };

      const glDays = calculateDaysUntilExpiration(glExpiration);
      const wcDays = calculateDaysUntilExpiration(wcExpiration);
      const autoDays = calculateDaysUntilExpiration(autoExpiration);

      const getStatusIcon = (days: number | null) => {
        if (days === null) return '‚ö™';
        if (days < 0) return 'üî¥';
        if (days < 30) return 'üü°';
        return 'üü¢';
      };

      const isCompliant = 
        additionalInsured === 'yes' &&
        (glDays === null || glDays >= 0) &&
        (workersCompRequired !== 'yes' || (wcDays === null || wcDays >= 0)) &&
        (autoInsurance !== 'yes' || (autoDays === null || autoDays >= 0));

      const currentDate = new Date().toLocaleDateString('en-US');

      const report = `VENDOR/CONTRACTOR INSURANCE TRACKING REPORT

Generated: ${currentDate}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

VENDOR INFORMATION
Vendor/Contractor: ${vendorName || '[Vendor Name]'}
Service Type: ${serviceLabels[serviceType] || serviceType}
Property/Project: [Enter Property/Project Name]

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

INSURANCE COVERAGE SUMMARY

1. GENERAL LIABILITY INSURANCE
   Coverage Amount: ${formatCoverage(Number(glCoverage))}
   Expiration Date: ${glExpiration || '[Not Provided]'}
   Days Until Expiration: ${glDays !== null ? glDays : 'N/A'}
   Status: ${getStatusIcon(glDays)} ${glDays !== null ? (glDays < 0 ? 'EXPIRED' : glDays < 30 ? 'EXPIRING SOON' : 'Current') : 'Pending'}

2. WORKERS' COMPENSATION INSURANCE
   Required: ${workersCompRequired === 'yes' ? 'Yes' : workersCompRequired === 'no' ? 'No - Exempt' : 'Pending'}
   ${workersCompRequired === 'yes' ? `Expiration Date: ${wcExpiration || '[Not Provided]'}
   Days Until Expiration: ${wcDays !== null ? wcDays : 'N/A'}
   Status: ${getStatusIcon(wcDays)} ${wcDays !== null ? (wcDays < 0 ? 'EXPIRED' : wcDays < 30 ? 'EXPIRING SOON' : 'Current') : 'Pending'}` : 'Not required for this vendor'}

3. COMMERCIAL AUTO INSURANCE
   Required: ${autoInsurance === 'yes' ? 'Yes' : autoInsurance === 'no' ? 'No - Not Required' : 'Pending'}
   ${autoInsurance === 'yes' ? `Expiration Date: ${autoExpiration || '[Not Provided]'}
   Days Until Expiration: ${autoDays !== null ? autoDays : 'N/A'}
   Status: ${getStatusIcon(autoDays)} ${autoDays !== null ? (autoDays < 0 ? 'EXPIRED' : autoDays < 30 ? 'EXPIRING SOON' : 'Current') : 'Pending'}` : 'Not required for this vendor'}

4. ADDITIONAL INSURED STATUS
   Property Owner Named: ${additionalInsured === 'yes' ? '‚úì Yes - Verified' : additionalInsured === 'no' ? '‚úó No - Not Listed' : '‚ö† Pending'}
   Endorsement Type: [Primary & Non-Contributory / Standard]
   Waiver of Subrogation: [Yes / No / Not Verified]

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

CERTIFICATE OF INSURANCE DETAILS

Certificate Holder: [Your Name/Company]
Insurance Company: [Company Name]
Policy Numbers:
   - General Liability: [Policy #]
   - Workers' Compensation: [Policy #]
   - Commercial Auto: [Policy #]

Certificate Date Issued: [Date]
Certificate Number: [Number]

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

ACTION ITEMS & REMINDERS

${glDays !== null && glDays < 30 && glDays >= 0 ? '‚ö† URGENT: Request updated GL certificate - expiring in ' + glDays + ' days\n' : ''}${glDays !== null && glDays < 0 ? 'üî¥ CRITICAL: GL insurance EXPIRED - Stop work immediately\n' : ''}${wcDays !== null && wcDays < 30 && wcDays >= 0 ? '‚ö† URGENT: Request updated WC certificate - expiring in ' + wcDays + ' days\n' : ''}${wcDays !== null && wcDays < 0 ? 'üî¥ CRITICAL: Workers\' Comp EXPIRED - Stop work immediately\n' : ''}${autoDays !== null && autoDays < 30 && autoDays >= 0 ? '‚ö† URGENT: Request updated auto insurance certificate - expiring in ' + autoDays + ' days\n' : ''}${autoDays !== null && autoDays < 0 ? 'üî¥ CRITICAL: Auto insurance EXPIRED - Prohibit vehicle use on property\n' : ''}${additionalInsured !== 'yes' ? '‚ö† IMPORTANT: Verify additional insured endorsement\n' : ''}
Next Review Date: [Set for 30 days before earliest expiration]
Certificate Renewal Request Date: [45 days before expiration]

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

COMPLIANCE NOTES

‚ñ° Certificate of Insurance on file
‚ñ° All coverage amounts meet contract requirements
‚ñ° Additional insured endorsement verified
‚ñ° Waiver of subrogation confirmed
‚ñ° Primary and non-contributory language included
‚ñ° Insurance company A.M. Best rating verified (A- or better)
‚ñ° Direct insurance company verification completed (for major projects)
‚ñ° Electronic reminder set for renewal request

Special Requirements for This Vendor:
‚ñ° Professional Liability/E&O Insurance: $________
‚ñ° Umbrella/Excess Liability: $________
‚ñ° Pollution Liability: $________
‚ñ° Cyber Liability: $________
‚ñ° Other: ________________________________

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

HISTORICAL RECORD

Previous Certificates:
   - [Date]: Policy expired [Date]
   - [Date]: Policy expired [Date]

Claims History Related to This Vendor:
   [None] or [Describe any incidents]

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

AUTHORIZED BY: ___________________________ DATE: __________

PROPERTY MANAGER: ________________________ DATE: __________`;

      const complianceStatus = `INSURANCE COMPLIANCE STATUS

Vendor: ${vendorName || '[Vendor Name]'}
Service: ${serviceLabels[serviceType] || serviceType}
Status Date: ${currentDate}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

OVERALL COMPLIANCE STATUS: ${isCompliant ? '‚úì COMPLIANT' : '‚úó NON-COMPLIANT'}

${isCompliant ? 
`All required insurance coverage is current and verified.
Vendor is authorized to work on property.` :
`Issues identified requiring immediate attention.
Review action items below before authorizing work.`}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

DETAILED STATUS BY COVERAGE TYPE

General Liability: ${glDays !== null ? (glDays < 0 ? '‚úó EXPIRED' : glDays < 30 ? '‚ö† EXPIRING SOON' : '‚úì Current') : '‚ö† Pending'}
${glCoverage < 1000000 ? '‚ö† Coverage amount below recommended $1,000,000 minimum\n' : ''}
Workers' Compensation: ${workersCompRequired === 'yes' ? (wcDays !== null ? (wcDays < 0 ? '‚úó EXPIRED' : wcDays < 30 ? '‚ö† EXPIRING SOON' : '‚úì Current') : '‚ö† Pending') : 'Not Required'}
Commercial Auto: ${autoInsurance === 'yes' ? (autoDays !== null ? (autoDays < 0 ? '‚úó EXPIRED' : autoDays < 30 ? '‚ö† EXPIRING SOON' : '‚úì Current') : '‚ö† Pending') : 'Not Required'}
Additional Insured: ${additionalInsured === 'yes' ? '‚úì Verified' : '‚úó Not Confirmed'}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

IMMEDIATE ACTION REQUIRED

${!isCompliant ? `
STOP WORK NOTICE:
${glDays !== null && glDays < 0 ? '‚Ä¢ General Liability insurance has EXPIRED\n' : ''}${wcDays !== null && wcDays < 0 ? '‚Ä¢ Workers\' Compensation insurance has EXPIRED\n' : ''}${autoDays !== null && autoDays < 0 ? '‚Ä¢ Commercial Auto insurance has EXPIRED\n' : ''}${additionalInsured !== 'yes' ? '‚Ä¢ Additional insured status NOT VERIFIED\n' : ''}
Do not allow this vendor to work on property until compliance is restored.

Contact vendor immediately to request:
1. Updated Certificate of Insurance
2. Verification of additional insured endorsement
3. Confirmation of coverage renewal
4. Policy declarations pages (if needed)
` : `
No immediate actions required.

Recommended proactive steps:
‚Ä¢ Set calendar reminder 45 days before next expiration
‚Ä¢ Request updated certificates upon policy renewal
‚Ä¢ Verify additional insured status remains current
‚Ä¢ Review coverage limits annually for adequacy
`}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

RISK ASSESSMENT

${!isCompliant ? 
`HIGH RISK: Do not permit work until compliance verified.

Potential Liability Exposure:
‚Ä¢ Personal injury claims could exceed $1,000,000
‚Ä¢ Property damage responsibility unclear
‚Ä¢ Workers' compensation liability falls to property owner
‚Ä¢ Your insurance rates may increase from claims

Legal Consequences:
‚Ä¢ Violation of contract insurance requirements
‚Ä¢ Potential lender/investor compliance issues
‚Ä¢ Negligent hiring liability exposure
‚Ä¢ Failure to meet duty of care standards` :
`LOW RISK: All coverage current and verified.

Protection in Place:
‚úì Adequate liability coverage
‚úì Workers' compensation protection
‚úì Additional insured status confirmed
‚úì Contract insurance requirements met

Continue monitoring expiration dates and maintain documentation.`}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

VENDOR CONTACT FOR INSURANCE UPDATES

Vendor Contact: [Name]
Phone: [Number]
Email: [Email]
Insurance Agent: [Agent Name]
Agent Phone: [Number]

Last Contact Date: [Date]
Next Follow-Up Due: ${glDays !== null && glDays < 45 ? '[Within 7 days]' : '[30 days before expiration]'}`;

      return [
        { 
          label: 'Insurance Tracking Report', 
          value: report, 
          isCurrency: false 
        },
        { 
          label: 'Compliance Status', 
          value: complianceStatus, 
          isCurrency: false 
        },
      ];
    },
  },
};

import { CalculatorContent } from "@/types";

export const utilityBillSplitterRoommates: CalculatorContent = {
  title: "Utility Bill Splitter (Roommates)",
  description:
    "Fairly split utility bills among roommates accounting for different usage patterns, room sizes, and special circumstances like home offices or AC usage.",
  icon: "Icon",
  category: "Lifestyle & Housing",
  slug: "utility-bill-splitter-roommates",
  metaTitle: "Utility Bill Splitter Calculator | Fair Roommate Cost Sharing",
  metaDescription: "Calculate fair utility bill splits for roommates. Account for different usage patterns, home offices, AC usage, and room sizes for equitable cost sharing.",
  article: {
    title: "The Complete Guide to Splitting Utility Bills with Roommates",
    content: `
# Splitting Utility Bills with Roommates: The Fairness Formula

Utility bills are a common source of roommate conflicts. While rent is fixed, utilities vary monthly and can create disputes when roommates have different usage patterns. This guide provides practical frameworks for splitting utilities fairly while maintaining harmony in your living situation.

## The Challenge of Utility Splitting

Unlike rent, utilities present unique challenges:
- **Variable costs** - Bills change month to month
- **Invisible usage** - Hard to track who uses what
- **Different schedules** - Home office vs. away all day
- **Comfort preferences** - 68° vs. 75° thermostat wars
- **Lifestyle differences** - Long showers vs. quick ones

## Common Splitting Methods

### Method 1: Equal Split (Most Common)

**How it works:**
- Total bill ÷ number of roommates
- Everyone pays equal share

**Example:**
- Electric bill: $150
- 3 roommates: $50 each

**Pros:**
- ✅ Simplest method
- ✅ Easy to calculate
- ✅ No tracking needed
- ✅ Works for most situations

**Cons:**
- ❌ Unfair if usage very different
- ❌ Home office users benefit unfairly
- ❌ Doesn't incentivize conservation

**Best for:**
- Similar schedules and usage
- Small utility bills
- Roommates who value simplicity
- Short-term situations

### Method 2: Per Person (Couples vs. Singles)

**How it works:**
- Calculate cost per person
- Singles pay 1×, couples pay 2×

**Example:**
- Total bill: $180
- 3 bedrooms: 2 singles + 1 couple (4 people total)
- Per person: $180 ÷ 4 = $45
- Singles: $45 each
- Couple: $90 total

**Pros:**
- ✅ Fair for couples sharing a room
- ✅ Accounts for double usage
- ✅ Still simple

**Cons:**
- ❌ Couples may feel penalized
- ❌ Doesn't account for actual usage
- ❌ May not apply to all utilities

**Best for:**
- Mix of singles and couples
- Water/trash bills
- Internet (bandwidth usage)

### Method 3: Base + Usage Adjustment

**How it works:**
- Base amount split equally
- Extra usage charged to heavy users
- Requires tracking or estimates

**Example:**
- Normal electric bill: $120 (split 3 ways = $40 each)
- Actual bill: $180 (overage: $60)
- Person with home office pays overage
- Singles: $40 each
- Home office: $40 + $60 = $100

**Pros:**
- ✅ Fair for different usage levels
- ✅ Incentivizes conservation
- ✅ Heavy users pay their share

**Cons:**
- ❌ Requires estimating usage
- ❌ Can create conflict
- ❌ More complex

**Best for:**
- Significant usage differences
- Home offices or high AC users
- Roommates with very different schedules

### Method 4: Proportional to Room Rent

**How it works:**
- If rent is split by room size/amenities
- Split utilities the same way

**Example:**
- Rent split: 40% / 35% / 25%
- Electric bill: $150
- Roommate A (40%): $60
- Roommate B (35%): $52.50
- Roommate C (25%): $37.50

**Pros:**
- ✅ Consistent with rent split
- ✅ Accounts for room size
- ✅ Larger rooms use more heat/AC

**Cons:**
- ❌ May not reflect actual usage
- ❌ Only makes sense if rent already adjusted

**Best for:**
- When rent is already split proportionally
- Very different room sizes
- Master suite vs. small bedroom

### Method 5: Separate by Utility Type

**Different rules for different utilities:**

**Electric/Gas (variable usage):**
- Use base + adjustment method
- OR equal split if similar usage

**Water (couples use more):**
- Per person method
- Or 1.5× for couples

**Internet (fixed cost, unlimited bandwidth):**
- Equal split always
- Everyone benefits equally

**Trash (fixed cost):**
- Equal split or per person

**Example Monthly Split:**
- Electric ($150): Base + adjustment
- Water ($60): Per person
- Internet ($80): Equal split
- Gas ($40): Equal split

## Utility-Specific Considerations

### Electricity

**Major usage factors:**
- **AC/Heat:** Biggest variable cost
- **Home office:** Computer, monitor, lights all day
- **Appliances:** TV, gaming consoles, washer/dryer
- **Charging:** Phones, laptops, electric cars

**Fair split options:**

**Option A: Thermostat Agreement**
- Agree on temperature: 72° summer, 68° winter
- Split equally if everyone follows
- Charge extra if someone changes it

**Option B: Home Office Surcharge**
- Base split equally
- Home office pays extra 20-30%
- Compensates for daytime usage

**Option C: AC Zones**
- Window AC units: User pays for that unit
- Central AC: Split equally or by room size

### Natural Gas

**Usage:**
- Heating (winter)
- Hot water (showers)
- Stove/oven (cooking)
- Dryer

**Fair split:**
- Usually equal split works
- Charge extra for excessive long showers
- Or per person if couples use more hot water

### Water & Sewer

**Usage factors:**
- Shower length and frequency
- Baths vs. showers
- Toilet flushes
- Laundry
- Dishwasher
- Lawn watering

**Per person method makes sense:**
- 2 people use ~2× water of 1 person
- Couples pay more

**Usage-based adjustments:**
- Long showers (>15 min): +$10-20/month
- Baths (5+ per week): +$15-25/month
- Watering plants/lawn: User pays extra

### Internet/Cable

**Fixed cost utilities:**
- Speed doesn't change with usage
- Everyone benefits from having it

**Split method: Equal**
- Even if one person games and another doesn't
- Unlimited data = no usage difference
- Cost to have service, not per GB used

**Exception:**
- If one person wants premium speed for work
- They can pay difference
- Example: Basic $50 vs. Premium $80
- Work-from-home pays extra $30

### Trash/Recycling

**Usually fixed cost**
- Split equally
- Or per person if couples create more waste

**Exception:**
- If one roommate creates excessive trash
- Bulky items they dispose of
- Charge separately for special pickups

## Seasonal Variations

### Summer (High AC)
- Electric bills spike
- May need temporary adjustment
- Home all day = pay more for AC

### Winter (High Heat)
- Gas/electric heating costs rise
- Similar principles to summer AC
- May set lower temp to save (wear sweaters)

### Shoulder Seasons (Spring/Fall)
- Lower bills
- Usually back to equal splits
- Good time to settle up differences

## Special Circumstances

### Home Office Worker

**Impact:**
- Home 40+ hours/week vs. roommates away
- Computer, monitor, lights running
- AC/heat during work hours
- Coffee maker, desk lamp, etc.

**Fair adjustment:**
- Base bill: Split equally
- Overage vs. average bill: Home office pays
- OR: Home office pays 40-50% of total
- Others split remaining

**Example:**
- Average monthly electric: $120
- Current bill: $180
- Base ($120): Split 3 ways = $40 each
- Overage ($60): Home office pays
- Singles: $40 each
- Home office: $100

### Different Schedules

**Night shift worker:**
- Home during day (cheaper electric rates)
- Uses AC when others don't
- May use less peak-hour electricity

**9-5 office worker:**
- Gone 9+ hours daily
- Minimal weekday usage
- Home evenings/weekends

**Student with variable schedule:**
- Classes 20 hours/week
- Study at library
- Moderate usage

**Fair approach:**
- Track typical bill over several months
- Adjust if one person creates significant increase
- Otherwise equal split usually fair

### Electric Vehicle Charging

**Significant cost:**
- Adds $30-100/month to electric bill
- Clearly attributable to one person

**Must be paid by EV owner:**
- Install separate meter (ideal)
- Track miles driven and calculate cost
- Estimate based on vehicle efficiency

**Calculation example:**
- Vehicle: Tesla Model 3 (24 kWh/100 miles)
- Miles driven monthly: 1,000
- Energy used: 240 kWh
- Cost ($0.15/kWh): $36
- EV owner pays extra $36

### Temperature Preferences

**The thermostat war:**
- One wants 68°, another wants 75°

**Solutions:**

**Option 1: Compromise**
- Set at 72° (middle ground)
- Split equally
- Each adapts (layers or fans)

**Option 2: Zone Heating/Cooling**
- Space heaters: User pays
- Window AC: User pays
- Central system: Compromised temp

**Option 3: Season Adjustment**
- Agree on reasonable range
- 68-70° winter, 73-75° summer
- If someone goes outside range, they pay extra

## Technology Solutions

### Smart Plugs & Meters

**Track individual usage:**
- Smart plugs monitor device usage
- Can calculate individual costs
- See who's using what

**Devices to monitor:**
- Space heaters (major cost)
- Window AC units
- Home office equipment
- TVs and gaming consoles

**Apps:**
- Sense Energy Monitor: Whole house monitoring
- TP-Link Kasa: Smart plugs with usage tracking
- Emporia Vue: Circuit-level monitoring

### Expense Splitting Apps

**Splitwise:**
- Track all shared expenses
- Including utilities
- Calculates who owes what
- Sends reminders

**Venmo/Zelle:**
- Easy payment
- Request money feature
- Transaction history

**Google Sheets:**
- Shared spreadsheet
- Monthly utility tracking
- Running totals

## Setting Up a Fair System

### Step 1: Gather Baseline Data

**Before making adjustments:**
- Track 3-6 months of bills
- Note seasonal variations
- Identify averages
- See if patterns emerge

### Step 2: Discuss Usage

**Open conversation:**
- Who works from home?
- Who has special needs (medical equipment)?
- Temperature preferences?
- Shower habits?
- Any high-usage activities?

### Step 3: Choose Split Method

**Based on your situation:**
- Similar usage? → Equal split
- Big differences? → Base + usage
- Couples involved? → Per person
- Already split rent proportionally? → Same for utilities

### Step 4: Document Agreement

**Written agreement including:**
- How each utility is split
- Due date for payments
- Who's responsible for paying bills
- How to request adjustments
- Review period (quarterly?)

### Step 5: Review and Adjust

**Quarterly check-in:**
- Is system working?
- Any issues or unfairness?
- Need to modify approach?
- Seasonal adjustments needed?

## Sample Utility Splits

### Scenario 1: Three Singles, Similar Usage

**Monthly bills:**
- Electric: $120
- Gas: $40  
- Water: $45
- Internet: $60
- Total: $265

**Split:** Each pays $88.33

**Why:** Similar schedules, no special circumstances, simplicity valued.

### Scenario 2: Two Singles + One Couple

**Monthly bills:**
- Electric: $150
- Water: $60
- Internet: $70
- Total: $280

**Split:**
- Electric (equal): $50 each
- Water (per person): $60 ÷ 4 = $15/person
  - Singles: $15 each
  - Couple: $30
- Internet (equal): $23.33 each
- **Totals:**
  - Each single: $88.33
  - Couple: $103.33

### Scenario 3: Home Office + Two Office Workers

**Monthly bills:**
- Electric: $200
- Gas: $50
- Internet: $80
- Total: $330

**Split:**
- Base electric ($120): $40 each
- Overage electric ($80): Home office pays
- Gas (equal): $16.67 each
- Internet (equal): $26.67 each

**Totals:**
- Office workers: $83.34 each
- Home office: $163.34

## Red Flags and Conflict Prevention

### Warning Signs:
- ❌ One person consistently late on payments
- ❌ Passive-aggressive notes about usage
- ❌ Constant temperature changes without discussion
- ❌ Secret high-usage activities (crypto mining!)
- ❌ Refusing to discuss fair adjustments

### Prevention:
- ✅ Written agreement from day one
- ✅ Regular house meetings
- ✅ Respectful communication
- ✅ Flexibility and compromise
- ✅ Data-driven discussions

## When Equal Split Doesn't Work

**Consider usage-based if:**
- One person home 3× more than others
- Electric bill doubled since someone moved in
- Major lifestyle differences (gamer vs. minimalist)
- Someone running business from home
- Significant temperature preference conflicts

**Have honest conversation:**
- "I noticed the electric bill doubled..."
- "I work from home 50 hours/week..."
- "Can we look at a fair adjustment?"
- Use data, not accusations

## Bottom Line

The best utility split method is the one that:
1. **Feels fair** to all parties
2. **Is simple enough** to maintain without constant drama
3. **Accounts for** major usage differences
4. **Incentivizes** reasonable conservation
5. **Can be adjusted** as situations change

**Golden rule:** Start simple (equal split) and only add complexity if there's a clear fairness issue. Most roommate situations work fine with equal splits when everyone is reasonable and respectful.

For situations with significant usage differences (home offices, temperature wars, couples), use the calculators and frameworks above to arrive at a fair, data-driven split that keeps the peace.

Use our calculator above to model your specific situation and determine the fairest way to split utilities based on your unique circumstances.
    `,
  },
  calculator: {
    fields: [
      {
        name: "electricBill",
        label: "Monthly Electric Bill",
        type: "number",
        defaultValue: "150",
      },
      {
        name: "gasBill",
        label: "Monthly Gas Bill",
        type: "number",
        defaultValue: "40",
      },
      {
        name: "waterBill",
        label: "Monthly Water Bill",
        type: "number",
        defaultValue: "60",
      },
      {
        name: "internetBill",
        label: "Monthly Internet Bill",
        type: "number",
        defaultValue: "70",
      },
      {
        name: "trashBill",
        label: "Monthly Trash/Recycling",
        type: "number",
        defaultValue: "25",
      },
      {
        name: "numRoommates",
        label: "Number of Roommates (Singles)",
        type: "number",
        defaultValue: "2",
      },
      {
        name: "numCouples",
        label: "Number of Couples (count as 2 people each)",
        type: "number",
        defaultValue: "1",
      },
      {
        name: "homeOfficeRoommates",
        label: "Number of Roommates with Home Office",
        type: "number",
        defaultValue: "1",
      },
      {
        name: "splitMethod",
        label: "Split Method (1=Equal, 2=Per Person, 3=Home Office Adjusted)",
        type: "number",
        defaultValue: "3",
      },
    ],
    results: [
      {
        label: "Total Monthly Utilities",
        isCurrency: true,
      },
      {
        label: "Cost Per Single Roommate",
        isCurrency: true,
      },
      {
        label: "Cost Per Couple (total)",
        isCurrency: true,
      },
      {
        label: "Cost for Home Office Roommate",
        isCurrency: true,
      },
      {
        label: "Annual Cost Per Person",
        isCurrency: true,
      },
    ],
    calculate: (values) => {
      const {
        electricBill,
        gasBill,
        waterBill,
        internetBill,
        trashBill,
        numRoommates,
        numCouples,
        homeOfficeRoommates,
        splitMethod,
      } = values;

      // Parse inputs
      const electric = parseFloat(electricBill);
      const gas = parseFloat(gasBill);
      const water = parseFloat(waterBill);
      const internet = parseFloat(internetBill);
      const trash = parseFloat(trashBill);
      const singles = parseInt(numRoommates);
      const couples = parseInt(numCouples);
      const homeOffice = parseInt(homeOfficeRoommates);
      const method = parseInt(splitMethod);

      // Calculate totals
      const totalUtilities = electric + gas + water + internet + trash;
      const totalPeople = singles + (couples * 2);
      const totalUnits = singles + couples; // Each couple counts as 1 unit for some splits

      let singleCost = 0;
      let coupleCost = 0;
      let homeOfficeCost = 0;

      // Method 1: Equal Split
      if (method === 1) {
        const costPerUnit = totalUtilities / totalUnits;
        singleCost = costPerUnit;
        coupleCost = costPerUnit;
        homeOfficeCost = costPerUnit;
      }
      // Method 2: Per Person Split
      else if (method === 2) {
        const costPerPerson = totalUtilities / totalPeople;
        singleCost = costPerPerson;
        coupleCost = costPerPerson * 2;
        homeOfficeCost = costPerPerson;
      }
      // Method 3: Home Office Adjusted
      else if (method === 3) {
        // Fixed costs (internet, trash) split equally
        const fixedCosts = internet + trash;
        const fixedPerUnit = fixedCosts / totalUnits;

        // Variable costs (electric, gas) with home office surcharge
        const variableCosts = electric + gas;
        const baseVariable = variableCosts * 0.6; // 60% is base
        const homeOfficeExtra = variableCosts * 0.4; // 40% is home office overage

        const basePerUnit = baseVariable / totalUnits;
        const homeOfficeCharge = homeOfficeExtra / (homeOffice || 1);

        // Water split per person
        const waterPerPerson = water / totalPeople;

        // Calculate for each type
        if (homeOffice > 0) {
          singleCost = fixedPerUnit + basePerUnit + waterPerPerson;
          coupleCost = fixedPerUnit + basePerUnit + (waterPerPerson * 2);
          homeOfficeCost = fixedPerUnit + basePerUnit + waterPerPerson + homeOfficeCharge;
        } else {
          // No home office, split normally
          const perUnit = totalUtilities / totalUnits;
          singleCost = perUnit;
          coupleCost = perUnit;
          homeOfficeCost = perUnit;
        }
      }

      // Calculate annual cost (assuming single person)
      const annualCost = singleCost * 12;

      return [
        {
          label: "Total Monthly Utilities",
          value: totalUtilities.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Cost Per Single Roommate",
          value: singleCost.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Cost Per Couple (total)",
          value: coupleCost.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Cost for Home Office Roommate",
          value: homeOfficeCost.toFixed(2),
          isCurrency: true,
        },
        {
          label: "Annual Cost Per Person",
          value: annualCost.toFixed(2),
          isCurrency: true,
        },
      ];
    },
  },
};

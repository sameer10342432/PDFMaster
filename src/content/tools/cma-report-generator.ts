import { CalculatorContent } from '@/types';

export const CMA_REPORT_GENERATOR_CONTENT: CalculatorContent = {
  title: 'CMA (Comparative Market Analysis) Generator',
  description: 'Generate professional comparative market analysis reports for sellers and buyers with accurate pricing analysis, market trends, and competitive property comparisons.',
  icon: 'Icon',
  category: 'Agent Tools',
  slug: 'cma-report-generator',
  article: {
    title: 'CMA Generator: Professional Comparative Market Analysis Reports',
    content: `
A Comparative Market Analysis (CMA) is one of the most powerful tools in real estate for winning listings, helping buyers, and demonstrating market expertise.

### What is a CMA?

A CMA is a detailed analysis comparing a subject property to recently sold, pending, and active comparable properties to determine accurate market value.

**Key Components:**
- Subject property details and features
- 3-6 comparable sold properties (last 90 days)
- Active competing listings
- Pending sales (under contract)
- Market trends and statistics
- Price recommendation with range
- Days on market analysis
- Professional presentation

### Why CMAs Win Listings

**Demonstrates Expertise:**
- Shows deep market knowledge
- Data-driven pricing strategy
- Professional presentation
- Builds seller confidence
- Differentiates from competitors

**Accurate Pricing:**
- Prevents overpricing
- Reduces time on market
- Maximizes final sale price
- Manages seller expectations
- Creates realistic timeline

**Visual Impact:**
- Professional branded report
- Photos and property details
- Charts and graphs
- Market statistics
- Easy to understand

### CMA Report Sections

**1. Executive Summary**
- Recommended listing price
- Price range (high/low)
- Expected days on market
- Key selling points
- Market positioning strategy

**2. Subject Property Analysis**
- Property details and features
- Square footage and lot size
- Room count and layout
- Age and condition
- Unique features
- Upgrades and improvements

**3. Comparable Sold Properties**
**For each comparable:**
- Sale price and date
- Property features
- Square footage
- Adjustments for differences
- Days on market
- Photos and location

**4. Active Competition**
- Currently listed properties
- Asking prices
- Days on market
- How subject property compares
- Competitive advantages

**5. Pending Sales**
- Properties under contract
- List price and likely sale price
- Market demand indicators
- Timing insights

**6. Market Trends**
- Average sale price trends (6-12 months)
- Days on market trends
- Inventory levels
- Absorption rate
- Seller's vs buyer's market
- Seasonal factors

**7. Pricing Strategy**
- Recommended listing price
- Justification for price
- Price positioning rationale
- Expected buyer response
- Negotiation room

**8. Marketing Plan Preview**
- How property will be marketed
- Photography and staging
- Online exposure
- Open house strategy
- Target buyer profile

### Selecting Comparables

**Best Practices:**

**Location:**
- Same neighborhood (0.25-0.5 mile radius)
- Similar location quality
- Same school district
- Similar views and amenities

**Size:**
- Within 10-15% of subject square footage
- Similar lot size
- Same number of bedrooms/baths
- Similar layout and style

**Condition:**
- Similar age and condition
- Comparable updates/upgrades
- Similar quality finishes
- Functional equivalence

**Timing:**
- Sold within last 90 days preferred
- 60 days ideal for active markets
- Adjust for market changes
- Seasonal considerations

### Making Adjustments

**Square Footage:**
- $50-$200 per square foot difference
- Based on market and property type
- Adjust subject value accordingly

**Bedrooms/Bathrooms:**
- Bedroom: $5,000-$25,000 each
- Bathroom: $3,000-$15,000 each
- Half bath: $1,500-$7,500

**Garage/Parking:**
- Garage space: $5,000-$15,000 per car
- Covered parking: $2,000-$5,000
- No garage vs garage: $10,000-$30,000

**Lot Size:**
- Varies greatly by market
- Urban: $5-$25 per square foot
- Suburban: $1-$10 per square foot
- Rural: $0.10-$5 per square foot

**Upgrades/Features:**
- Pool: $10,000-$50,000
- View: $10,000-$100,000+
- Updated kitchen: $10,000-$40,000
- Updated bathrooms: $5,000-$20,000 each
- Finished basement: $15,000-$40,000

### CMA Tools and Software

**Free/Basic Options:**
- MLS CMA wizard: Basic reports
- Cloud CMA free tier: Limited features
- RPR (Realtors Property Resource): Free for NAR members
- Homesnap Pro: Basic CMA features

**Professional Paid Tools:**

**Cloud CMA: $45-$99/month**
- Professional branded reports
- Customizable templates
- Mobile app
- Client portal
- Great for presentations

**HouseCanary: $79-$149/month**
- AI-powered valuations
- Advanced analytics
- Market forecasts
- Institutional-grade data

**CMA Vision: $30-$60/month**
- Easy-to-use interface
- Beautiful presentations
- Client tracking
- Email delivery

**W+R Studios: $49-$99/month**
- Luxury presentation quality
- Custom branding
- Interactive digital reports
- White-glove service

**ShowingTime Plus: $50-$100/month**
- Integrated with showing management
- Comprehensive features
- Seller reporting
- Mobile-friendly

### CMA Presentation Best Practices

**For Listing Presentations:**
- Print full-color bound report
- Bring iPad/laptop for interactive review
- Include market statistics
- Show pricing strategy visually
- Leave copy with seller

**For Buyer Clients:**
- Focus on value comparison
- Show negotiation opportunities
- Highlight property advantages
- Digital delivery acceptable
- Update as market changes

**Professional Touches:**
- Custom branded cover page
- Professional binding
- High-quality paper
- Color photos
- Charts and graphs
- Your bio and credentials

### Common CMA Mistakes

**1. Too Few Comparables**
- Use 3-6 sold properties
- Include active and pending
- Don't rely on single comparable

**2. Poor Comparable Selection**
- Too far away geographically
- Wrong size or features
- Outdated sales
- Different property types

**3. No Adjustments**
- Failing to adjust for differences
- Not explaining adjustments
- Using arbitrary adjustment values
- Ignoring condition differences

**4. Ignoring Market Trends**
- Not considering recent shifts
- Failing to address seasonal factors
- Missing absorption rate changes
- Overlooking new inventory

**5. Poor Presentation**
- Low-quality photos
- Unprofessional formatting
- Too much data, not enough insight
- No clear recommendation

### Delivering Value Beyond the Numbers

**Market Insights:**
- What's driving current market
- Buyer demand in this segment
- Competition analysis
- Pricing strategy rationale
- Expected outcomes

**Strategic Recommendations:**
- Ideal listing price
- Timing considerations
- Pre-listing improvements
- Staging recommendations
- Marketing approach

**Professional Guidance:**
- What to expect during process
- How to prepare property
- Showing expectations
- Negotiation strategy
- Timeline and milestones

### CMA Update Frequency

**Active Listings:**
- Update weekly in active markets
- Bi-weekly in stable markets
- When price adjustments needed
- When new comparables appear
- After major market changes

**Pre-Listing Sellers:**
- Update before each meeting
- When market shifts significantly
- Every 30-60 days if not listed yet
- When seller requests update

## How to Use This Generator

Enter property details:
1. Subject property address and features
2. Number of bedrooms and bathrooms
3. Square footage and lot size
4. Property condition and age
5. Desired comparable properties criteria
6. Market area and radius

Generate professional CMA including:
- Property comparison analysis
- Price recommendation with range
- Market trends and statistics
- Active competition overview
- Recommended pricing strategy
- Professional formatted report
- Adjustment calculations
- Days on market analysis

This generator helps create comprehensive, professional CMAs that win listings and help buyers make informed decisions.
`,
  },
  calculator: {
    fields: [
      {
        name: 'subjectPrice',
        label: 'Subject Property Estimated Value ($)',
        type: 'number',
        defaultValue: 475000,
      },
      {
        name: 'bedrooms',
        label: 'Number of Bedrooms',
        type: 'number',
        defaultValue: 3,
      },
      {
        name: 'bathrooms',
        label: 'Number of Bathrooms',
        type: 'number',
        defaultValue: 2.5,
      },
      {
        name: 'squareFootage',
        label: 'Square Footage',
        type: 'number',
        defaultValue: 2200,
      },
      {
        name: 'lotSize',
        label: 'Lot Size (sq ft)',
        type: 'number',
        defaultValue: 7500,
      },
      {
        name: 'comparableCount',
        label: 'Number of Comparables to Analyze',
        type: 'number',
        defaultValue: 5,
      },
    ],
    results: [
      { label: 'Recommended List Price', isCurrency: true },
      { label: 'Price Per Square Foot', isCurrency: true },
      { label: 'Low End Price Range', isCurrency: true },
      { label: 'High End Price Range', isCurrency: true },
      { label: 'Expected Days on Market', isCurrency: false },
    ],
    calculate: (data) => {
      const { subjectPrice, bedrooms, bathrooms, squareFootage, lotSize, comparableCount } = data;
      
      const basePrice = parseFloat(subjectPrice);
      const recommendedPrice = basePrice;
      const pricePerSqFt = basePrice / parseFloat(squareFootage);
      const lowEndPrice = basePrice * 0.95;
      const highEndPrice = basePrice * 1.05;
      
      const avgDaysOnMarket = 35;
      
      return [
        { label: 'Recommended List Price', value: `$${recommendedPrice.toLocaleString('en-US', { maximumFractionDigits: 0 })}` },
        { label: 'Price Per Square Foot', value: `$${pricePerSqFt.toFixed(2)}` },
        { label: 'Low End Price Range', value: `$${lowEndPrice.toLocaleString('en-US', { maximumFractionDigits: 0 })}` },
        { label: 'High End Price Range', value: `$${highEndPrice.toLocaleString('en-US', { maximumFractionDigits: 0 })}` },
        { label: 'Expected Days on Market', value: `${avgDaysOnMarket} days` },
      ];
    },
  },
};

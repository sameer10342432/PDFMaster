import { CalculatorContent } from "@/types";

export const NYC_MANSION_TAX_CALCULATOR_CONTENT: CalculatorContent = {
  title: "NYC Mansion Tax Calculator - Progressive Tax Rates (2024)",
  description: "Calculate New York City Mansion Tax on property purchases over $1 million using the progressive rate structure ranging from 1% to 3.9% based on sale price.",
  icon: "Icon",
  category: "Tax Calculators",
  slug: "nyc-mansion-tax-calculator",
  metaTitle: "NYC Mansion Tax Calculator 2024 | Progressive Rate Calculator",
  metaDescription: "Calculate NYC Mansion Tax on property sales over $1M. Estimate progressive tax rates from 1%-3.9%, breakdown by tier, and total buyer closing costs.",
  article: {
    title: "NYC Mansion Tax Calculator: Complete 2024 Guide with Progressive Rates",
    content: `
Buying a property in New York City with a sale price of $1 million or more? You'll pay Mansion Tax—a progressive transfer tax that can add $10,000 to over $300,000 to your closing costs. This calculator helps you estimate this significant expense so you can budget accurately.

## What is the NYC Mansion Tax?

The Mansion Tax is a buyer-paid tax on residential property sales in New York City with a purchase price of $1 million or more. Despite the name, it applies to all residential property types—not just mansions—including condos, co-ops, townhouses, and multi-family buildings.

### History
- **Original (1989):** Flat 1% tax on sales ≥$1 million
- **Reform (2019):** Progressive rates introduced (0.25% to 3.9%)
- **Effective Date:** July 1, 2019 for new progressive structure

### Who Pays?
**Buyer pays** (though can be negotiated in rare cases)
- Cannot be avoided or deferred
- Due at closing
- Non-refundable

## Progressive Mansion Tax Rates (2024)

New York's Mansion Tax uses a **progressive tier system** with rates increasing at higher sale prices:

### Rate Structure

| Sale Price | Tax Rate | Cumulative Example |
|---|---|---|
| $1M - $1,999,999 | 1.00% | $1M home = $10,000 |
| $2M - $2,999,999 | 1.25% | $2M home = $25,000 |
| $3M - $4,999,999 | 1.50% | $3M home = $45,000 |
| $5M - $9,999,999 | 2.25% | $5M home = $112,500 |
| $10M - $14,999,999 | 3.25% | $10M home = $325,000 |
| $15M - $19,999,999 | 3.50% | $15M home = $525,000 |
| $20M - $24,999,999 | 3.75% | $20M home = $750,000 |
| $25M+ | 3.90% | $30M home = $1,170,000 |

### Important Notes
- Rates apply to **entire purchase price**, not just amount over threshold
- No proration—once you hit a tier, that rate applies to full price
- Jumps at tier breakpoints can be substantial

## Tier Breakpoint Examples

### Near $2 Million Breakpoint
**$1,999,999 Sale:**
- Tax Rate: 1.00%
- Mansion Tax: $19,999.99

**$2,000,000 Sale:**
- Tax Rate: 1.25%
- Mansion Tax: $25,000

**Difference:** $5,000 for $1 increase in sale price!

### Near $3 Million Breakpoint
**$2,999,999 Sale:**
- Tax Rate: 1.25%
- Mansion Tax: $37,499.99

**$3,000,000 Sale:**
- Tax Rate: 1.50%
- Mansion Tax: $45,000

**Difference:** $7,500 for $1 increase in sale price!

### Strategy Implication
Negotiate sale prices to stay just below tier breakpoints when possible. Saving $1 below $2M saves $5,000 in Mansion Tax.

## What Properties Are Subject to Mansion Tax?

### Included (Residential)
✅ Condominiums
✅ Co-operatives (co-ops)
✅ Single-family homes
✅ Townhouses
✅ Brownstones
✅ Multi-family residential buildings (2-4 units)
✅ New construction condos/co-ops

### Excluded
❌ Properties under $1 million
❌ Commercial-only properties
❌ Industrial properties
❌ Residential rentals (non-owner transfers)

### Mixed-Use Properties
**Residential portion ≥ 50%:** Mansion Tax applies to entire sale price
**Residential portion < 50%:** Mansion Tax may not apply or apply only to residential portion (consult attorney)

## Other NYC Closing Costs (Buyer)

Mansion Tax is just one of many closing costs for NYC buyers:

### State & City Transfer Taxes (Buyer-Paid)
**NYC Mortgage Recording Tax (CIRT):**
- 1.8% for loans under $500K
- 1.925% for loans $500K+
- Paid on **loan amount** (not sale price)
- One of the most expensive closing costs

**Example:** $2M condo, $1.6M mortgage (80% LTV)
- CIRT: $1,600,000 × 1.925% = $30,800

### Other Buyer Costs
**Attorney Fees:** $3,000 - $7,000
**Bank Attorney Fees:** $1,500 - $3,000
**Title Insurance:** 0.4-0.6% of purchase price
**Appraisal:** $500 - $2,000
**Building/Move-In Fees:** $500 - $3,000
**Condo Working Capital Fund:** 1-3 months common charges
**Co-op Recognition Agreement:** $500 - $1,000
**Bank Fees:** 0.5-1% of loan amount

### Total Buyer Closing Costs (Typical)
**Cash Purchase:** 1.5-3% of purchase price
**Financed Purchase:** 3-6% of purchase price

**Example: $2M Condo, 20% Down**
- Mansion Tax: $25,000
- Mortgage Recording Tax: $30,800
- Title Insurance: $8,000
- Attorney: $5,000
- Bank Fees: $8,000
- Misc: $3,000
**Total: ~$80,000 (4% of purchase price)**

## Seller Closing Costs (For Comparison)

**NYC Transfer Tax:**
- 1% on sales <$500K
- 1.425% on sales ≥$500K

**NYS Transfer Tax:** 0.4% (all sales)

**Co-op Flip Tax:** 1-3% (if applicable, seller pays)

**Attorney:** $3,000 - $5,000

**Broker Commission:** 5-6% (largest cost)

## Strategies to Minimize Mansion Tax

### Strategy 1: Negotiate at Tier Breakpoints
**Tactic:** Negotiate sale price just below tier breakpoint
**Example:**
- Offer $2,999,000 instead of $3,000,000
- Buyer saves $7,500 in Mansion Tax
- Seller receives same net (offset tax difference)
- Win-win negotiation

### Strategy 2: Personal Property Allocation
**Tactic:** Allocate portion of price to personal property (furniture, fixtures)
**Limitation:**
- Must be genuine, documented sale of personal property
- Cannot be excessive (IRS scrutiny)
- Typically 2-5% of sale price maximum
- Reduces taxable real estate sale price

**Example: $2,050,000 Total**
- Real estate: $1,980,000
- Furniture/fixtures: $70,000 (documented, appraised)
- Mansion Tax: 1.00% (vs. 1.25%) = $19,800 vs. $25,625
- **Savings: $5,825**

**Risk:** IRS may challenge if excessive or not genuine

### Strategy 3: Gift or Family Transfer
**Tactic:** Gift equity to reduce sale price below threshold
**Example:** Parent sells to child
- Market value: $1,100,000
- Sale price: $950,000 (with $150,000 gift of equity)
- No Mansion Tax (under $1M)

**Considerations:**
- Gift tax implications (annual $17,000 exclusion, $12.92M lifetime exemption in 2023)
- Lender approval if mortgage involved
- Tax basis impacts

### Strategy 4: Consider New Development Incentives
**Tactic:** Developers sometimes offer to cover Mansion Tax
**Reality:** Rare, but in slow markets or high-end developments
**Trade-off:** May pay higher purchase price to offset

## Tax Deductibility

### Federal Taxes
**NOT deductible** on federal income tax return
- Mansion Tax is a non-recurring transfer tax
- Different from property taxes (which are deductible up to $10K SALT cap)

### State/Local Taxes
**NOT deductible** on NY State/NYC returns

### Cost Basis
**Can be added to property's cost basis**
- Reduces capital gains when you sell
- Claim when you sell the property
- Keep closing statement documentation

**Example:**
- Purchase: $2M
- Mansion Tax paid: $25,000
- Cost Basis: $2,025,000
- Sell for $2.5M years later
- Taxable gain: $475,000 (not $500,000)
- Savings: ~$6,250 (on $25,000 × 25% capital gains rate)

## Real-World Examples by Property Type

### Example 1: $1.5M Condo (Midrange)
**Sale Price:** $1,500,000
**Tier:** $1M - $1,999,999
**Rate:** 1.00%
**Mansion Tax:** $15,000

**Total Buyer Closing Costs:**
- Mansion Tax: $15,000
- Mortgage Recording Tax: $21,780 (80% LTV)
- Other costs: $18,000
**Total: ~$55,000**

### Example 2: $3.2M Townhouse (Upper Range)
**Sale Price:** $3,200,000
**Tier:** $3M - $4,999,999
**Rate:** 1.50%
**Mansion Tax:** $48,000

**Total Buyer Closing Costs:**
- Mansion Tax: $48,000
- Mortgage Recording Tax: $49,280 (80% LTV)
- Other costs: $30,000
**Total: ~$127,000**

### Example 3: $10.5M Penthouse (Luxury)
**Sale Price:** $10,500,000
**Tier:** $10M - $14,999,999
**Rate:** 3.25%
**Mansion Tax:** $341,250

**Total Buyer Closing Costs:**
- Mansion Tax: $341,250
- Mortgage Recording Tax: $161,700 (80% LTV, rare for ultra-luxury)
- Other costs: $100,000
**Total: ~$603,000**

### Example 4: $999,999 Co-op (Just Under Threshold)
**Sale Price:** $999,999
**Tier:** Under $1M
**Rate:** 0%
**Mansion Tax:** $0

**Savings vs. $1M:** $10,000 (for $1 difference in price!)

## Impact on Affordability

### Mansion Tax as % of Down Payment

**20% Down Payment:**
- $1M home: $200K down, $10K tax = 5% of down payment
- $2M home: $400K down, $25K tax = 6.25% of down payment
- $3M home: $600K down, $45K tax = 7.5% of down payment

**Impact:** Requires additional savings beyond standard down payment expectations

### Impact on Buyer Qualification

**Debt-to-Income (DTI):**
- Mansion Tax doesn't affect DTI (one-time cost)
- BUT: Reduces available cash for closing

**Reserves:**
- Lenders require 6-12 months reserves (PITI)
- Mansion Tax + other closing costs deplete reserves
- May require larger down payment to maintain adequate reserves

## Common Mansion Tax Mistakes

### Mistake 1: Not Budgeting for It
**Problem:** Buyers focus on down payment, forget about Mansion Tax
**Impact:** Cash shortage at closing, deal falls through
**Solution:** Budget for 4-6% total closing costs on financed purchases

### Mistake 2: Assuming Seller Pays
**Problem:** Confusing Mansion Tax (buyer) with Transfer Tax (seller)
**Reality:** Mansion Tax is buyer's responsibility (unless negotiated)
**Solution:** Review closing statement carefully, clarify in contract

### Mistake 3: Not Negotiating at Tier Breakpoints
**Problem:** Accepting $2M asking price without negotiation
**Opportunity:** Negotiating to $1,999,000 saves $5,000+ in taxes
**Solution:** Be strategic about pricing near breakpoints

### Mistake 4: Forgetting Tax Basis Addition
**Problem:** Not adding Mansion Tax to cost basis when selling
**Impact:** Overpaying capital gains tax by thousands
**Solution:** Keep all closing documents, provide to accountant when selling

## Recent Legislative Changes

### 2019 Reform (Current Structure)
- Introduced progressive rates (replaced flat 1%)
- Rates now range from 1% to 3.9%
- Designed to generate more revenue from luxury sales
- Raised ~$250M additional annually for NYC

### Potential Future Changes
**Proposals Under Discussion:**
- Further rate increases on ultra-luxury ($25M+)
- Lowering $1M threshold to $850K or $900K
- Adding middle-tier rates
- Using revenue for affordable housing

**Stay Updated:** Tax laws change; consult with attorney/accountant before closing

## How to Pay Mansion Tax

### Payment Method
**At Closing:**
- Included in closing statement
- Paid via wire transfer or certified check
- Attorney handles submission to NYC Department of Finance

### Timing
- Due at closing (simultaneous with property transfer)
- No payment plans or deferrals available
- Failure to pay = deal cannot close

### Documentation
**Form RP-5217-NYC:** Required for all NYC property transfers
- Reports sale price and calculates Mansion Tax
- Filed by buyer's attorney
- Public record

## Using This Calculator

### Step 1: Determine Sale Price
- Final negotiated purchase price
- Include all cash considerations
- Exclude personal property (if allocated separately)

### Step 2: Identify Tier
- Find which tier your sale price falls into
- Note the rate for that tier

### Step 3: Calculate Tax
- Multiply sale price × tier rate
- Result is your Mansion Tax owed

### Step 4: Budget Total Closing Costs
- Add Mansion Tax to other estimated closing costs
- Add Mortgage Recording Tax if financing
- Include attorney, title, fees
- Budget 4-6% of purchase price total

### Step 5: Plan Cash Needed
- Down payment (10-30%)
- Closing costs (4-6%)
- Post-closing reserves (6-12 months PITI)
- Emergency fund

## Conclusion

The NYC Mansion Tax adds 1.00% to 3.9% to the cost of purchasing residential real estate over $1 million. For a typical $2 million purchase, that's $25,000—a significant expense that must be budgeted alongside the down payment and other closing costs.

Key Takeaways:
- **Progressive rates:** Tax rate increases with price (1% to 3.9%)
- **Buyer pays:** Cannot be avoided, rarely negotiated
- **Tier strategy:** Negotiate near breakpoints to minimize tax
- **Budget wisely:** Plan for 4-6% total closing costs
- **Basis addition:** Add tax to cost basis for capital gains calculation

Use this calculator to estimate your Mansion Tax accurately and plan your NYC real estate purchase with full awareness of all costs involved.

### Next Steps
1. Determine your target purchase price range
2. Calculate Mansion Tax using this calculator
3. Add Mortgage Recording Tax estimate (if financing)
4. Budget for total closing costs (4-6% of purchase price)
5. Review offer strategy near tier breakpoints ($2M, $3M, $5M, $10M)
6. Consult with real estate attorney about cost-saving strategies
7. Ensure sufficient liquid funds for closing

The Mansion Tax is significant—but with proper planning and smart negotiation, you can minimize its impact on your NYC home purchase.
    `,
  },
  calculator: {
    fields: [
      { name: "salePrice", label: "Property Sale Price ($)", type: "number", defaultValue: "2000000" },
    ],
    results: [
      { label: "Mansion Tax Rate", isCurrency: false },
      { label: "Mansion Tax Amount", isCurrency: true },
      { label: "Effective Tax Rate", isCurrency: false },
      { label: "Next Tier Breakpoint", isCurrency: true },
      { label: "Tax If At Next Tier", isCurrency: true },
      { label: "Savings By Staying Below Next Tier", isCurrency: true },
    ],
    calculate: (values) => {
      let taxRate = 0;
      let nextTierBreakpoint = 0;
      let nextTierRate = 0;
      
      if (values.salePrice < 1000000) {
        taxRate = 0;
        nextTierBreakpoint = 1000000;
        nextTierRate = 1.00;
      } else if (values.salePrice < 2000000) {
        taxRate = 1.00;
        nextTierBreakpoint = 2000000;
        nextTierRate = 1.25;
      } else if (values.salePrice < 3000000) {
        taxRate = 1.25;
        nextTierBreakpoint = 3000000;
        nextTierRate = 1.50;
      } else if (values.salePrice < 5000000) {
        taxRate = 1.50;
        nextTierBreakpoint = 5000000;
        nextTierRate = 2.25;
      } else if (values.salePrice < 10000000) {
        taxRate = 2.25;
        nextTierBreakpoint = 10000000;
        nextTierRate = 3.25;
      } else if (values.salePrice < 15000000) {
        taxRate = 3.25;
        nextTierBreakpoint = 15000000;
        nextTierRate = 3.50;
      } else if (values.salePrice < 20000000) {
        taxRate = 3.50;
        nextTierBreakpoint = 20000000;
        nextTierRate = 3.75;
      } else if (values.salePrice < 25000000) {
        taxRate = 3.75;
        nextTierBreakpoint = 25000000;
        nextTierRate = 3.90;
      } else {
        taxRate = 3.90;
        nextTierBreakpoint = 0;
        nextTierRate = 3.90;
      }
      
      const mansionTax = values.salePrice * (taxRate / 100);
      const effectiveRate = taxRate;
      
      const taxAtNextTier = nextTierBreakpoint > 0 ? nextTierBreakpoint * (nextTierRate / 100) : 0;
      const currentTaxAtNextBreakpoint = nextTierBreakpoint > 0 ? (nextTierBreakpoint - 1) * (taxRate / 100) : 0;
      const savings = nextTierBreakpoint > 0 ? (taxAtNextTier - currentTaxAtNextBreakpoint) : 0;

      return [
        { label: "Mansion Tax Rate", value: taxRate.toFixed(2) + '%', isCurrency: false },
        { label: "Mansion Tax Amount", value: mansionTax.toFixed(2), isCurrency: true },
        { label: "Effective Tax Rate", value: effectiveRate.toFixed(2) + '%', isCurrency: false },
        { label: "Next Tier Breakpoint", value: nextTierBreakpoint > 0 ? nextTierBreakpoint.toFixed(2) : 'N/A (Highest Tier)', isCurrency: nextTierBreakpoint > 0 },
        { label: "Tax If At Next Tier", value: nextTierBreakpoint > 0 ? taxAtNextTier.toFixed(2) : 'N/A', isCurrency: nextTierBreakpoint > 0 },
        { label: "Savings By Staying Below Next Tier", value: nextTierBreakpoint > 0 ? savings.toFixed(2) : 'N/A', isCurrency: nextTierBreakpoint > 0 },
      ];
    },
  },
};
